!function(t,e){var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,currentTimeIndicator:!1,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",multiWeek:"MMM d[ yyyy]{ '–'[ MMM] d yyyy}",week:"MMM d[ yyyy]{ '–'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy",list:"MMM d, yyyy",table:"MMM d[ yyyy]{ '–'[ MMM] d yyyy}",todo:"MMM d[ yyyy]{ '–'[ MMM] d yyyy}"},columnFormat:{month:"ddd",multiWeek:"ddd",week:"ddd M/d",day:"dddd M/d",list:"dddd, MMM d, yyyy",table:"MMM d, yyyy",todo:"MMM d, yyyy"},timeFormat:{"":"h(:mm)t",agenda:"h:mm{ – h:mm}",list:"hh:mm{ – hh:mm}",listFull:"hh:mm M d yyyy{ – hh:mm M d yyyy}",listFullAllDay:"M d yyyy{ – M d yyyy}"},isRTL:!1,firstDay:0,weekendDays:[0,6],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;❮&nbsp;",next:"&nbsp;❯&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",multiWeek:"mweek",week:"week",day:"day",list:"list",table:"table",todo:"todo",prevMonth:"Load previous month",nextMonth:"Load next month",filtersHeader:"Filters",filtersFooter:"* completed at or after %date%",filterAction:"Needs action",filterProgress:"In progress",filterCompleted:"Completed",filterCanceled:"Canceled"},listTexts:{until:"until",past:"Past events",today:"Today",tomorrow:"Tomorrow",thisWeek:"This week",nextWeek:"Next week",thisMonth:"This month",nextMonth:"Next month",future:"Future events",week:"W"},listSections:"smart",listRange:30,listPage:7,tableCols:["handle","date","time","title"],todoCols:["handle","check","priority","time","title","location","status","percent"],todoColThresholds:[],todoOptionalCols:[],defaultFilters:[],theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",headerContainer:!1,bindingMode:"single",dayEventSizeStrict:!1,startOfBusiness:0,endOfBusiness:0,showWeekNumbers:!0,multiWeekSize:3,showDatepicker:!1,eventMode:!0,showUnstartedEvents:!1,simpleFilters:!1},a={header:{left:"next,prev today",center:"",right:"title"},headerContainer:"",buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},r=t.fullCalendar={version:"1.5.4"},o=r.views={};function s(e){t.extend(!0,n,e)}function l(n,a,i){var s=this;s.options=a,s.render=function(e){h?(P(),_(),Z(),I(e)):function(){a.theme?"ui":"fc",n.addClass("fc"),a.isRTL&&n.addClass("fc-rtl");a.theme&&n.addClass("ui-widget");h=t("<div class='fc-content' style='position:relative'/>").prependTo(n),l=new d(s,a),(c=l.render())&&(a.headerContainer?a.headerContainer.prepend(c):n.prepend(c));B(a.defaultView),t(window).resize(U),L()||O()}()},s.destroy=function(){t(window).unbind("resize",U),l.destroy(),h.remove(),n.removeClass("fc fc-rtl ui-widget")},s.refetchEvents=X,s.reportEvents=function(t){W=t,G()},s.reportEventChange=function(t){G(t)},s.rerenderEvents=G,s.changeView=B,s.select=function(t,n,a){v.select(t,n,a===e||a)},s.unselect=$,s.prev=function(){I(-1),K("prevClick")},s.next=function(){I(1),K("nextClick")},s.prevYear=function(){m(H,-1),I()},s.nextYear=function(){m(H,1),I()},s.today=function(){H=new Date,I(),Q(),K("todayClick")},s.findToday=Q,s.gotoDate=function(t,e,n){t instanceof Date?H=M(t):E(H,t,e,n);I()},s.incrementDate=function(t,n,a){t!==e&&m(H,t);n!==e&&y(H,n);a!==e&&w(H,a);I()},s.formatDate=function(t,e){return z(t,e,a)},s.formatDates=function(t,e,n){return N(t,e,n,a)},s.getDate=function(){return M(H)},s.getView=function(){return v},s.option=function(t,n){if(n===e)return a[t];"height"==t||"contentHeight"==t||"aspectRatio"==t?(a[t]=n,V()):0!=t.indexOf("list")&&"tableCols"!=t||(a[t]=n,v.start=null)},s.trigger=K,s.selectEvent=function(t,e){v.selectEvent(t,e)},s.allowSelectEvent=function(t){v.allowSelectEvent(t)},s.updateToday=function(){for(var t in s.viewInstances)s.viewInstances[t].updateToday()},s.updateGrid=function(){for(var t in s.viewInstances)s.viewInstances[t].updateGrid()},s.renderViews=R,s.setOptions=function(e){var n=!1;t.each(e,function(e,r){if(t.isPlainObject(r)?t.extend(a[e],r):a[e]=r,"firstDay"==e||"timeFormat"==e)n=!0;else for(var i in s.viewInstances)s.viewInstances[i]["set"+e.charAt(0).toUpperCase()+e.slice(1)]()}),n&&R()},s.getOption=function(t){return a[t]},s.viewInstances={},function(n,a){var i=this;i.isFetchNeeded=function(t,e){return!o||t<o||e>s},i.fetchEvents=function(t,e){o=t,s=e,y=[];var n=++p,a=v.length;g=a;for(var r=0;r<a;r++)D(v[r],n)},i.addEventSource=function(t){(t=b(t))&&(g++,D(t,p));return t},i.removeEventSource=function(e){v=t.grep(v,function(t){return!T(t,e)}),y=t.grep(y,function(t){return!T(t.source,e)}),d(y)},i.removeEventSources=function(){for(;source=v.shift();)y=t.grep(y,function(t){return!T(t.source,source)}),d(y)},i.updateEvent=function(t){var e,n,a=y.length,r=c().defaultEventEnd,i=t.start-t._start,o=t.end?t.end-(t._end||r(t)):0;for(e=0;e<a;e++)(n=y[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+i),t.end?n.end?n.end=new Date(+n.end+o):n.end=new Date(+r(n)+o):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroudColor=t.backgroudColor,n.borderColor=t.borderColor,n.textColor=t.textColor,S(n));S(t),d(y)},i.renderEvent=function(t,e){S(t),t.source||e&&(h.events.push(t),t.source=h);y.push(t),d(y)},i.removeEvents=function(e){var n=y;if(e){if(!t.isFunction(e)){var a=e+"";e=function(t){return t._id==a}}y=t.grep(y,e,!0)}else y=[];n.length!=y.length&&d(y)},i.clientEvents=function(e){if(t.isFunction(e))return t.grep(y,e);if(e)return e+="",t.grep(y,function(t){return t._id==e});return y},i.normalizeEvent=S;for(var o,s,l=i.trigger,c=i.getView,d=i.reportEvents,h={events:[]},v=[h],p=0,g=0,m=0,y=[],w=0;w<a.length;w++)b(a[w]);function D(e,a){!function e(a,i){var l;var c=r.sourceFetchers;var d;for(l=0;l<c.length;l++){if(!0===(d=c[l](a,o,s,i)))return;if("object"==typeof d)return void e(d,i)}var u=a.events;if(u)t.isFunction(u)?(C(),u(M(o),M(s),function(t){i(t),k()})):t.isArray(u)?i(u):i();else{var h=a.url;if(h){var v=a.success,p=a.error,g=a.complete,m=t.extend({},a.data||{}),y=rt(a.startParam,n.startParam),w=rt(a.endParam,n.endParam);y&&(m[y]=Math.round(+o/1e3)),w&&(m[w]=Math.round(+s/1e3)),C(),t.ajax(t.extend({},f,a,{data:m,success:function(e){e=e||[];var n=at(v,this,arguments);t.isArray(n)&&(e=n),i(e)},error:function(){at(p,this,arguments),i()},complete:function(){at(g,this,arguments),k()}}))}else i()}}(e,function(t){if(a==p){if(t){for(var n=0;n<t.length;n++)t[n].source=e,S(t[n]);y=y.concat(t)}--g||d(y)}})}function b(e){if(t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return function(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=r.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}(e),v.push(e),e}function C(){m++||l("loading",null,!0)}function k(){--m||l("loading",null,!1)}function S(t){var a=t.source||{},r=rt(a.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+u++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=M(t.start=x(t.start,r)),t.end=x(t.end,r),t.end&&(n.eventMode&&t.end<=t.start||!n.eventMode&&t.end<t.start)&&(t.end=null),t._end=t.end?M(t.end):null,t.allDay===e&&(t.allDay=rt(a.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function T(t,e){return t&&e&&E(t)==E(e)}function E(t){return("object"==typeof t?t.events||t.url:"")||t}}.call(s,a,i);var l,c,h,v,p,g,D,b,C=s.isFetchNeeded,k=s.fetchEvents,S=n[0],T=0,F=0,H=new Date,W=[];function O(){setTimeout(function(){!v.start&&L()&&I()},0)}function R(){for(var t in s.viewInstances)s.viewInstances[t].start=null;I()}function A(){return 0!==S.offsetWidth}function L(){return 0!==t("body")[0].offsetWidth}function B(e){if(!v||e!=v.name){F++,$();var n,a=v;a?((a.beforeHide||J)(),a.element.hide(),a.addedView&&a.addedView.element.hide()):q(h,1),h.css("overflow","hidden"),(v=s.viewInstances[e])?v.element.show():v=s.viewInstances[e]=new o[e](n=D=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(h),s),"agendaDay"==e&&(addedView=s.viewInstances.table,addedView?addedView.element.show():(addedView=s.viewInstances.table=new o.table(addedNewViewElement=addedAbsoluteViewElement=t("<div class='fc-view fc-view-table' style='position:absolute'/>").appendTo(h),s),v.addedView=addedView)),a&&l.deactivateButton(a.name),l.activateButton(e),I(),h.css("overflow",""),a&&q(h,1),n||(v.afterShow||J)(),F--,v.trigger("viewChanged",S)}}function I(t){if(A()){v.trigger("beforeViewDisplay",S),F++,$(),g===e&&P(),v.addedView&&v.start&&M(H,!0).getTime()==v.start.getTime()&&v.addedView.scrollToDate(H);var r=!1;!v.start||t||H<v.start||H>=v.end?(v.render(H,t||0),j(!0),r=!0):v.sizeDirty?(v.clearEvents(),j(),r=!0):v.eventsDirty&&(v.clearEvents(),r=!0),v.sizeDirty=!1,v.eventsDirty=!1,o=r,!a.lazyFetching||C(v.visStart,v.visEnd)?X():o&&G(),p=n.outerWidth(),l.updateTitle(v.title);var i=new Date;i>=v.start&&i<v.end?(l.setTodayScroll(n),Q()):l.setTodayDefault(),F--,v.trigger("viewDisplay",S)}var o}function V(){_(),A()&&(P(),j(),"todo"!=v.name&&($(),v.clearEvents(),v.renderEvents(W)),v.sizeDirty=!1)}function _(){t.each(s.viewInstances,function(t,e){e.sizeDirty=!0})}function P(){g=a.contentHeight?a.contentHeight:a.height?a.height-(c?c.height():0)-Y(h):Math.round(h.width()/Math.max(a.aspectRatio,.5))}function j(t){F++,v.setWidth(h.width(),t),v.setHeight(g,t),D&&(D.css("position","relative"),D=null),F--}function U(){F||(v.start?++T==T&&!F&&A()&&p!=(p=n.outerWidth())&&(F++,V(),v.trigger("windowResize",S),F--):O())}function X(){k(v.visStart,v.visEnd)}function G(t){Z(),A()&&(v.clearEvents(),v.renderEvents(W,t),v.eventsDirty=!1)}function Z(){t.each(s.viewInstances,function(t,e){e.eventsDirty=!0})}function $(){v&&v.unselect()}function Q(){if(v.addedView){if(v.addedView.getDaySegmentContainer().find(".fc-today").length>0)if(1==(new Date).getDate())v.addedView.getDaySegmentContainer().parent().scrollTop(0);else{a=v.addedView.getDaySegmentContainer().find(".fc-today").position().top;var t=v.addedView.getDaySegmentContainer().parent().scrollTop();v.addedView.getDaySegmentContainer().parent().scrollTop(t+a)}}else if("todo"==v.name){if(v.getDaySegmentContainer().find(".fc-today").length>0){a=v.getDaySegmentContainer().find(".fc-today").position().top;t=v.getDaySegmentContainer().parent().scrollTop();v.getDaySegmentContainer().parent().scrollTop(t+a)}}else{var e=v.element.find(".fc-today");if(e.length>0){var a=0;e.parent().hasClass("fc-week0")||(a=e.position().top),n.parent().scrollTop(a)}}}function K(t,e){if(a[t])return a[t].apply(e||S,Array.prototype.slice.call(arguments,2))}E(H,a.year,a.month,a.date),a.droppable&&t(document).bind("dragstart",function(e,n){var r=e.target,i=t(r);if(!i.parents(".fc").length){var o=a.dropAccept;(t.isFunction(o)?o.call(r,i):i.is(o))&&(b=r,v.dragStart(b,e,n))}}).bind("dragstop",function(t,e){b&&(v.dragStop(b,t,e),b=null)})}function d(e,n){var a=this;a.render=function(){if(r=n.theme?"ui":"fc",n.header)return i=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(s("left")).append(s("center")).append(s("right")))},a.destroy=function(){i.remove()},a.updateTitle=function(e){i.find("h2").html(e).attr("title",t("<div/>").html(e).text())},a.activateButton=function(t){i.find("span.fc-button-"+t).addClass(r+"-state-active")},a.deactivateButton=function(t){i.find("span.fc-button-"+t).removeClass(r+"-state-active")},a.disableButton=function(t){i.find("span.fc-button-"+t).addClass(r+"-state-disabled")},a.enableButton=function(t){i.find("span.fc-button-"+t).removeClass(r+"-state-disabled")},a.setTodayDefault=function(){var t=i.find("span.fc-button-today"),n=e.today;t.unbind("click"),t.click(function(){t.hasClass(r+"-state-disabled")||n()})},a.setTodayScroll=function(t){var n=i.find("span.fc-button-today"),a=e.findToday;n.unbind("click"),n.click(function(){n.hasClass(r+"-state-disabled")||a()})};var r,i=t([]);function s(a){var i=t("<td class='fc-header-"+a+"'/>"),s=n.header[a];return s&&t.each(s.split(" "),function(a){var s;a>0&&i.append("<span class='fc-header-space'/>"),t.each(this.split(","),function(a,l){var c;if("title"==l)i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(r+"-corner-right"),s=null;else if(e[l]?c=e[l]:o[l]&&(c=function(){u.removeClass(r+"-state-hover"),e.changeView(l)}),c){var d="prev"==l||"next"==l?l:null,f=Z(n.buttonText,l),u=t("<span class='fc-button fc-button-"+l+" "+r+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(d?"<img src='images/arrow_"+d+".svg'/>":f)+"</span><span class='fc-button-effect'><span></span></span></span></span>");u&&(u.click(function(){u.hasClass(r+"-state-disabled")||c()}).mousedown(function(){u.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-down")}).mouseup(function(){u.removeClass(r+"-state-down")}).hover(function(){u.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-hover")},function(){u.removeClass(r+"-state-hover").removeClass(r+"-state-down")}).appendTo(i),s||u.addClass(r+"-corner-left"),s=u)}}),s&&s.addClass(r+"-corner-right")}),i}}t.fn.fullCalendar=function(r){if("string"==typeof r){var i,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t.data(this,"fullCalendar");if(n&&t.isFunction(n[r])){var a=n[r].apply(n,o);i===e&&(i=a),"destroy"==r&&t.removeData(this,"fullCalendar")}}),i!==e?i:this}var s=r.eventSources||[];return delete r.eventSources,r.events&&(s.push(r.events),delete r.events),r=t.extend(!0,{},n,r.isRTL||r.isRTL===e&&n.isRTL?a:{},r),this.each(function(e,n){var a=t(n),i=new l(a,r,s);a.data("fullCalendar",i),i.render()}),this},r.sourceNormalizers=[],r.sourceFetchers=[];var f={dataType:"json",cache:!1},u=1;r.addDays=w,r.cloneDate=M,r.parseDate=x,r.parseISO8601=F,r.parseTime=H,r.formatDate=z,r.formatDates=N;var h=["sun","mon","tue","wed","thu","fri","sat"],v=864e5,p=36e5,g=6e4;function m(t,e,n){return t.setFullYear(t.getFullYear()+e),n||C(t),t}function y(t,e,n){if(+t){var a=t.getMonth()+e,r=M(t);for(r.setDate(1),r.setMonth(a),t.setMonth(a),n||C(t);t.getMonth()!=r.getMonth();)t.setDate(t.getDate()+(t<r?1:-1))}return t}function w(t,e,n){if(+t){var a=t.getDate()+e,r=M(t);r.setHours(9),r.setDate(a),t.setDate(a),n||C(t),D(t,r)}return t}function D(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*p)}function b(t,e){return t.setMinutes(t.getMinutes()+e),t}function C(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function M(t,e){return null==t?null:e?C(new Date(+t)):new Date(+t)}function k(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function S(t,e,n){for(e=e||1;!t.getDay()||n&&1==t.getDay()||!n&&6==t.getDay();)w(t,e);return t}function T(t,e){return Math.round((M(t,!0)-M(e,!0))/v)}function E(t,n,a,r){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),a!==e&&a!=t.getMonth()&&(t.setDate(1),t.setMonth(a)),r!==e&&t.setDate(r)}function x(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),F(t,n)||(t?new Date(t):null)):null}function F(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var a=new Date(n[1],0,1);if(e||!n[13]){var r=new Date(n[1],0,1,12,0);D(a,r),n[3]&&(a.setMonth(n[3]-1),r.setMonth(n[3]-1)),n[5]&&(a.setDate(n[5]),r.setDate(n[5])),D(a,r),n[7]&&a.setHours(n[7]),n[8]&&a.setMinutes(n[8]),n[10]&&a.setSeconds(n[10]),n[12]&&a.setMilliseconds(1e3*Number("0."+n[12])),D(a,r)}else if(a.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),a.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var i=60*Number(n[16])+(n[18]?Number(n[18]):0);i*="-"==n[15]?1:-1,a=new Date(+a+60*i*1e3)}return a}function H(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function z(t,e,n){return N(t,null,e,n)}function N(t,e,a,r){r=r||n;var i,o,s,l,c=t,d=e,f=a.length,u="";for(i=0;i<f;i++)if("'"==(o=a.charAt(i))){for(s=i+1;s<f;s++)if("'"==a.charAt(s)){c&&(u+=s==i+1?"'":a.substring(i+1,s),i=s);break}}else if("("==o){for(s=i+1;s<f;s++)if(")"==a.charAt(s)){var h=z(c,a.substring(i+1,s),r);parseInt(h.replace(/\D/,""),10)&&(u+=h),i=s;break}}else if("["==o){for(s=i+1;s<f;s++)if("]"==a.charAt(s)){var v=a.substring(i+1,s);(h=z(c,v,r))!=z(d,v,r)&&(u+=h),i=s;break}}else if("{"==o)c=e,d=t;else if("}"==o)c=t,d=e;else{for(s=f;s>i;s--)if(l=W[a.substring(i,s)]){c&&(u+=l(c,r)),i=s-1;break}s==i&&c&&(u+=o)}return u}var W={s:function(t){return t.getSeconds()},ss:function(t){return G(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return G(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return G(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return G(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return G(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},W:function(t){return bt(t)},M:function(t){return t.getMonth()+1},MM:function(t){return G(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return z(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"}};function O(t){return t.end?(e=t.end,n=t.allDay,e=M(e),n||e.getHours()||e.getMinutes()?w(e,1):C(e)):w(M(t.start),1);var e,n}function R(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function A(t,e){return t.end>e.start&&t.start<e.end}function L(t,e,n,a){var r,i,o,s,l,c,d,f,u=[],h=t.length;for(r=0;r<h;r++)o=(i=t[r]).start,(s=e[r])>n&&o<a&&(o<n?(l=M(n),d=!1):(l=o,d=!0),s>a?(c=M(a),f=!1):(c=s,f=!0),u.push({event:i,start:l,end:c,isStart:d,isEnd:f,msLength:c-l}));return u.sort(R)}function B(t){var e,n,a,r,i,o=[],s=t.length;for(e=0;e<s;e++){for(n=t[e],a=0;;){if(r=!1,o[a])for(i=0;i<o[a].length;i++)if(A(o[a][i],n)){r=!0;break}if(!r)break;a++}o[a]?o[a].push(n):o[a]=[n]}return o}function I(n,a,r){n.unbind("mouseover").mouseover(function(n){for(var i,o,s,l=n.target;l!=this;)i=l,l=l.parentNode;(o=i._fci)!==e&&(i._fci=e,s=a[o],r(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function V(e,n,a){for(var r,i=0;i<e.length;i++)(r=t(e[i])).width(Math.max(0,n-P(r,a)))}function _(e,n,a){for(var r,i=0;i<e.length;i++)(r=t(e[i])).height(Math.max(0,n-Y(r,a)))}function P(e,n){return function(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}(e)+function(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}(e)+(n?function(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}(e):0)}function Y(e,n){return function(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}(e)+function(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}(e)+(n?j(e):0)}function j(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function q(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,n){n.style.cssText+=";min-height:"+e+";_height:"+e})}function J(){}function U(t,e){return t-e}function X(t){return Math.max.apply(Math,t)}function G(t){return(t<10?"0":"")+t}function Z(t,n){if(t[n]!==e)return t[n];for(var a,r=n.split(/(?=[A-Z])/),i=r.length-1;i>=0;i--)if((a=t[r[i].toLowerCase()])!==e)return a;return t[""]}function $(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Q(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function K(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function tt(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function et(t,e,n){t.each(function(t,a){a.className=a.className.replace(/^fc-\w*( fc-weekend-day)?/,"fc-"+h[e.getDay()]+(n("weekendDays").length>0&&-1!=n("weekendDays").indexOf(e.getDay())?" fc-weekend-day":""))})}function nt(t,e){var n=t.source||{},a=t.color,r=n.color,i=e("eventColor"),o=t.backgroundColor||a||n.backgroundColor||r||e("eventBackgroundColor")||i,s=t.borderColor||a||n.borderColor||r||e("eventBorderColor")||i,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return o&&c.push("background-color:"+o),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function at(e,n,a){if(t.isFunction(e)&&(e=[e]),e){var r,i;for(r=0;r<e.length;r++)i=e[r].apply(n,a)||i;return i}}function rt(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function it(e,n,a){var r=this;r.renderBasic=function(n,a,h,v){p=a,g=h,(b=z("isRTL"))?(k=-1,S=g-1):(k=1,S=0),E=z("firstDay"),x=z("weekends")?0:1,F=z("theme")?"ui":"fc",H=z("columnFormat"),s?W():function(n,a){var r,h,v,p,m=F+"-widget-header",y=F+"-widget-content";for(r="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",h=0;h<g;h++)r+="<th class='fc- "+m+"'/>";for(r+="</tr></thead><tbody>",h=0;h<n;h++){for(r+="<tr class='fc-week"+h+"'>",v=0;v<g;v++)r+="<td class='fc- "+y+" fc-day"+(h*g+v)+"'><div>"+(a?"<div class='fc-day-header'><div class='fc-week-number'/><div class='fc-day-text'/><div class='fc-day-number'/></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";r+="</tr>"}p=t(r+="</tbody></table>").appendTo(e),i=p.find("thead"),o=i.find("th"),s=p.find("tbody"),l=s.find("tr"),c=s.find("td"),d=c.filter(":first-child"),f=l.eq(0).find("div.fc-day-content div"),tt(i.add(i.find("tr"))),tt(l),l.eq(0).addClass("fc-first"),$(c),u=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}(n,v);!function(e){var n,a,i,s=e||1==p,d=r.start.getMonth(),f=C(new Date);s&&o.each(function(e,r){n=t(r),a=st(e),n.html(_(a,H)),et(n,a,z)});c.each(function(e,r){n=t(r),(a=st(e)).getMonth()==d?n.removeClass("fc-other-month"):n.addClass("fc-other-month"),z("showWeekNumbers")&&e%7==0&&(yt(n,a),mt(n,a)),+a==+f?(n.addClass(F+"-state-highlight fc-today"),gt(n,z("buttonText","today")),pt(n,z("buttonText","today"))):(n.removeClass(F+"-state-highlight fc-today"),gt(n,z("buttonText","today"))),n.find("div.fc-day-number").text(a.getDate()),s&&et(n,a,z)}),l.each(function(e,n){i=t(n),e<p?(i.show(),e==p-1?i.addClass("fc-last"):i.removeClass("fc-last")):i.hide()})}(!0)},r.setHeight=function(e){var n,a,r,o=e-i.height();"variable"==z("weekMode")?n=a=Math.floor(o/(1==p?2:6)):(n=Math.floor(o/p),a=o-n*(p-1));d.each(function(e,i){e<p&&q((r=t(i)).find("> div"),(e==p-1?a:n)-Y(r))})},r.setWidth=function(t){h=t,D.clear(),v=Math.floor(h/g),V(o.slice(0,-1),v)},r.renderDayOverlay=nt,r.defaultSelectionEnd=function(t,e){return M(t)},r.renderSelection=function(t,e,n){nt(t,w(M(e),1),!0)},r.clearSelection=function(){A()},r.reportDayClick=function(t,e,n){var a=rt(t),r=c[a.row*g+a.col];N("dayClick",r,t,e,n)},r.dragStart=function(t,e,n){y.start(function(t){A(),t&&at(t.row,t.col,t.row,t.col)},e)},r.dragStop=function(t,e,n){var a=y.stop();if(A(),a){var r=it(a);N("drop",t,r,!0,e,n)}},r.defaultEventEnd=function(t){return M(t.start)},r.getHoverListener=function(){return y},r.colContentLeft=function(t){return D.left(t)},r.colContentRight=function(t){return D.right(t)},r.dayOfWeekCol=wt,r.dateCell=rt,r.cellDate=it,r.cellIsAllDay=function(){return!0},r.allDayRow=function(t){return l.eq(t)},r.allDayBounds=function(t){return{left:0,right:h}},r.getRowCnt=function(){return p},r.getColCnt=function(){return g},r.getColWidth=function(){return v},r.getDaySegmentContainer=function(){return u},r.updateGrid=function(){P(),X(),G(),Z()},r.updateToday=P,r.setAxisFormat=j,r.setStartOfBusiness=J,r.setEndOfBusiness=U,r.setWeekendDays=X,r.setBindingMode=G,r.setSelectable=Z,lt.call(r,e,n,a),ft.call(r),dt.call(r),function(){var e=this;e.renderEvents=function(t,e){o(t),g(y(t),e,!1)},e.compileDaySegs=y,e.clearEvents=function(){s(),d().empty()},e.bindDaySeg=function(t,e,o){r(t)&&function(t,e){var r,i=f();e.draggable({zIndex:9,delay:50,scroll:!1,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(o,s){a("eventDragStart",e,t,o,s),i.start(function(a,i,o,s){e.draggable("option","revert",!a||!o&&!s),h(),a?(r=7*o+s*(n("isRTL")?-1:1),u(w(M(t.start),r),w(O(t),r))):r=0},o,"drag")},stop:function(n,o){i.stop(),h(),a("eventDragStop",e,t,n,o),r?c(this,t,r,0,t.allDay,n,o):e.css("filter","")}})}(t,e);o.isEnd&&i(t)&&m(t,e,o);l(t,e)},ct.call(e);var n=e.opt,a=e.trigger,r=e.isEventDraggable,i=e.isEventResizable,o=e.reportEvents,s=e.reportEventClear,l=e.eventElementHandlers,c=(e.showEvents,e.hideEvents,e.eventDrop),d=e.getDaySegmentContainer,f=e.getHoverListener,u=e.renderDayOverlay,h=e.clearOverlays,v=e.getRowCnt,p=e.getColCnt,g=e.renderDaySegs,m=e.resizableDayEvent;function y(n){var a,r,i,o,s,l,c=v(),d=p(),f=M(e.visStart),u=w(M(f),d),h=t.map(n,O),g=[];for(a=0;a<c;a++){for(r=B(L(n,h,f,u)),i=0;i<r.length;i++)for(o=r[i],s=0;s<o.length;s++)(l=o[s]).row=a,l.level=i,g.push(l);w(f,7),w(u,7)}return g}}.call(r);var i,o,s,l,c,d,f,u,h,v,p,g,m,y,D,b,k,S,E,x,F,H,z=r.opt,N=r.trigger,W=r.clearEvents,R=r.renderOverlay,A=r.clearOverlays,I=r.daySelectionMousedown,_=n.formatDate;function P(){var e,n=C(new Date);c.each(function(a,r){e=t(r),+st(a)==+n?(e.addClass(F+"-state-highlight fc-today"),gt(e,z("buttonText","today")),pt(e,z("buttonText","today"))):(e.removeClass(F+"-state-highlight fc-today"),gt(e,z("buttonText","today")))})}function j(){}function J(){}function U(){}function X(){o.each(function(e,n){et(t(n),st(e),z)}),c.each(function(e,n){et(t(n),st(e),z)})}function G(){$(c)}function Z(){$(c)}function $(t){t.unbind("click dblclick"),"double"==z("bindingMode")?t.dblclick(Q).mousedown(I):t.click(Q).mousedown(I)}function Q(t){var e=st(parseInt(this.className.match(/fc\-day(\d+)/)[1]));N("dayClick",this,e,!0,t)}function nt(t,e,n){n&&m.build();for(var a=M(r.visStart),i=w(M(a),g),o=0;o<p;o++){var s,l,c=new Date(Math.max(a,t)),d=new Date(Math.min(i,e));if(c<d)b?(s=T(d,a)*k+S+1,l=T(c,a)*k+S+1):(s=T(c,a),l=T(d,a)),$(at(o,s,o,l-1));w(a,7),w(i,7)}}function at(t,n,a,r){var i=m.rect(t,n,a,r,e);return R(i,e)}function rt(t){return{row:Math.floor(T(t,r.visStart)/7),col:wt(t.getDay())}}function it(t){return ot(t.row,t.col)}function ot(t,e){return w(M(r.visStart),7*t+e*k+S)}function st(t){return ot(Math.floor(t/g),t%g)}function wt(t){return(t-Math.max(E,x)+g)%g*k+S}K(e.addClass("fc-grid")),m=new ut(function(e,n){var a,r,i;o.each(function(e,o){a=t(o),r=a.offset().left,e&&(i[1]=r),i=[r],n[e]=i}),i[1]=r+a.outerWidth(),l.each(function(n,o){n<p&&(a=t(o),r=a.offset().top,n&&(i[1]=r),i=[r],e[n]=i)}),i[1]=r+a.outerHeight()}),y=new ht(m),D=new vt(function(t){return f.eq(t)})}function ot(n,a,r){var i=this;i.renderAgenda=function(e){bt=e,Tt=Rt("theme")?"ui":"fc",xt=Rt("weekends")?0:1,Et=Rt("firstDay"),(Ft=Rt("isRTL"))?(Ht=-1,zt=bt-1):(Ht=1,zt=0),Nt=H(Rt("minTime")),Wt=H(Rt("maxTime")),Ot=Rt("columnFormat"),o?Lt():function(){var e,a,r,i,g,w=Tt+"-widget-header",C=Tt+"-widget-content",T=Rt("slotMinutes")%15==0;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+w+"'><div class='fc-week-number'/></th>",a=0;a<bt;a++)e+="<th class='fc- fc-col"+a+" "+w+"'/>";for(e+="<th class='fc-agenda-gutter "+w+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+w+"'>&nbsp;</th>",a=0;a<bt;a++)e+="<td class='fc- fc-col"+a+" "+C+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";o=t(e+="<td class='fc-agenda-gutter "+C+"'>&nbsp;</td></tr></tbody></table>").appendTo(n),s=o.find("thead"),l=s.find("th").slice(1,-1),c=o.find("tbody"),d=c.find("td").slice(0,-1),f=d.find("div.fc-day-content div"),u=d.eq(0),h=u.find("> div"),tt(s.add(s.find("tr"))),tt(c.add(c.find("tr"))),q=s.find("th:first"),J=o.find(".fc-agenda-gutter"),v=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Rt("allDaySlot")?(N=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto;'/>").appendTo(v),W=t("<div style='position:relative;width:100%;overflow:hidden;min-height:37px'/>").appendTo(N),R=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(W),e="<table style='width:100%;' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+w+" fc-agenda-axis'>"+Rt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative;min-height:34px'/></div></td></tr></table>",p=t(e).appendTo(N),ee((m=p.find("tr")).find("td")),q=q.add(p.find("th:first")),J=J.add(p.find("th.fc-agenda-gutter")),X=t("<div class='fc-agenda-divider "+w+"'><div class='fc-agenda-divider-inner'/></div>").appendTo(v)):R=t([]);for(y=t("<div style='position:relative;width:100%;'/>").appendTo(v),S=t("<div style='position:relative;width:100%;'/>").appendTo(v),x=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(v),F=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(x),z=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(F),a=0;a<bt;a++)y.append(t('<div class="fc-slot-jumper-top"/>')),S.append(t('<div class="fc-slot-jumper-bottom"/>'));D=y.children(),E=S.children(),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=k(),i=b(M(r),Wt),b(r,Nt),Ct=0;var H=Rt("startOfBusiness")*(60/Rt("slotMinutes")),O=(Rt("endOfBusiness")-Rt("slotMinutes")/60)*(60/Rt("slotMinutes"));for(a=0;r<i;a++){g=r.getMinutes();var L=a<H||a>O?" fc-non-business-hours":"";e+="<tr class='fc-slot"+a+" "+(g?"fc-minor":"")+L+"'><th class='fc-agenda-axis "+w+"'>"+(T&&g?"&nbsp;":jt(r,Rt("axisFormat")))+"</th><td class='"+C+"'><div style='position:relative'>&nbsp;</div></td></tr>",b(r,Rt("slotMinutes")),Ct++}A=t(e+="</tbody></table>").appendTo(F),j=A.find("div:first"),ne(A.find("td")),q=q.add(A.find("th:first"))}();!function(){var e,n,a,r,i,o=C(new Date);r=q[0],Rt("showWeekNumbers")&&(yt(t(r),ce(0)),mt(t(r),ce(0)));for(e=0;e<bt;e++)i=ce(e),(n=l.eq(e)).html(jt(i,Ot)),a=d.eq(e),et(n.add(a),i,Rt),+i==+o?(a.addClass(Tt+"-state-highlight fc-today"),wt(a)):(a.removeClass(Tt+"-state-highlight fc-today"),Dt(a))}()},i.setWidth=function(a){a===e&&(a=Z);if(Z=a,i.addedView){var r=Math.floor(n.parent().width()/2);n.css({width:r}),Z=r}St.clear(),rt=0,V(q.width("").each(function(e,n){rt=Math.max(rt,t(n).outerWidth())}),rt);var o=x[0].clientWidth;(ot=x.width()-o||N.width()-W.width())?(V(J,ot),J.show().prev().removeClass("fc-last")):J.hide().prev().addClass("fc-last");it=Math.floor((o-rt)/bt),V(l.slice(0,-1),it),D.each(function(e,n){var a=t(n);a.css("left",rt+it*(e+1)-1-a.width())}),E.each(function(e,n){var a=t(n);a.css("left",rt+it*(e+1)-1-a.width())}),i.addedView&&i.addedView.setWidth(r)},i.setHeight=function(t,n){t===e&&(t=at);at=t,Jt={};var a=c.position().top,r=Rt("allDaySlot")?4:0,o=Math.min(t-a,A.height()+r+1),s=Math.floor((o-r-1)/3);N.css("max-height",s+3),m.find("div:first").children().css("max-height",s),r=p.height(),Rt("allDaySlot")&&(X.css("position","relative"),X.css("top",r),x.css("top",r+4));o=Math.min(t-a,A.height()+r+1),h.height(o-Y(u));var l=o-r-1-(Rt("allDaySlot")?4:0);v.css("top",a),x.height(l),pt=j.height()+1,y.css("top",r+1),S.css("top",l+r+1-E.first().height()),n&&function(){var t=k(),e=M(t);e.setHours(Rt("firstHour"));var n=ue(t,e)+1;function a(){x.scrollTop(n)}a(),setTimeout(a,0)}();i.addedView&&i.addedView.setHeight(t,n)},i.beforeHide=function(){gt=x.scrollTop()},i.afterShow=function(){x.scrollTop(gt)},i.defaultEventEnd=function(t){var e=M(t.start);if(t.allDay)return e;return b(e,Rt("defaultEventMinutes"))},i.timePosition=ue,i.dayOfWeekCol=fe,i.dateCell=function(t){return{row:Math.floor(T(t,i.visStart)/7),col:fe(t.getDay())}},i.cellDate=le,i.cellIsAllDay=de,i.allDayRow=function(t){return m},i.allDayBounds=function(){return{left:rt,right:Z-ot}},i.getHoverListener=function(){return kt},i.colContentLeft=function(t){return St.left(t)},i.colContentRight=function(t){return St.right(t)},i.getDaySegmentContainer=function(){return R},i.getSlotJumpersTop=function(){return D},i.getSlotJumpersBottom=function(){return E},i.getslotScroller=function(){return x},i.getSlotContent=function(){return F},i.getSlotSegmentContainer=function(){return z},i.getMinMinute=function(){return Nt},i.getMaxMinute=function(){return Wt},i.getBodyContent=function(){return F},i.getRowCnt=function(){return 1},i.getColCnt=function(){return bt},i.getColWidth=function(){return it},i.getSlotHeight=function(){return pt},i.defaultSelectionEnd=function(t,e){if(e)return M(t);return b(M(t),Rt("slotMinutes"))},i.renderDayOverlay=ie,i.renderSelection=function(t,e,n){n?Rt("allDaySlot")&&ie(t,w(M(e),1),!0):he(t,e)},i.renderSlotSelection=he,i.clearSelection=ve,i.reportDayClick=function(t,e,n){At("dayClick",d[fe(t.getDay())],t,e,n)},i.dragStart=function(t,e,n){kt.start(function(t){if(It(),t)if(de(t))oe(t.row,t.col,t.row,t.col);else{var e=le(t),n=b(M(e),Rt("defaultEventMinutes"));se(e,n)}},e)},i.dragStop=function(t,e,n){var a=kt.stop();It(),a&&At("drop",t,le(a),de(a),e,n)},i.updateGrid=function(){Ut(),qt(),Xt(),Gt(),Zt(),Qt(),Kt(),te()},i.updateToday=Ut,i.setAxisFormat=Xt,i.setStartOfBusiness=Gt,i.setEndOfBusiness=Zt,i.setWeekendDays=Qt,i.setBindingMode=Kt,i.setSelectable=te,lt.call(i,n,a,r),ft.call(i),dt.call(i),function(){var n=this;n.renderEvents=function(o,s){c(o);var l,d=o.length,f=[],v=[];for(l=0;l<d;l++)o[l].allDay?f.push(o[l]):v.push(o[l]);r("allDaySlot")&&(F(et(f),s,!0),u(),h());(function(a,o){var s,l,c,d,f,u,h,v,g,w,b,C,M,k,S,F,H,N,W,O,R,L,B=a.length,V="",_={},j={},q=p(),J=m(),U=D(),X=y(),G=z(),$=new Array(G);for((O=r("isRTL"))?(R=-1,L=G-1):(R=1,L=0),s=0;s<G;s++)$[s]={positions:new Array};for(s=0;s<B;s++)l=a[s],c=l.event,d=T(l.start,l.start),f=T(l.start,l.end),u=l.col,h=l.level,v=l.forward||0,g=E(u*R+L),w=x(u*R+L)-g,w=Math.min(w-6,.95*w),b=h?w/(h+v+1):v?2*(w/(v+1)-6):w,C=g+w/(h+v+1)*h*R+(O?w-b:0),l.top=d,l.left=C,l.outerWidth=b,l.outerHeight=f-d,V+=rt(c,l);for(U[0].innerHTML=V,M=U.children(),s=0;s<B;s++)l=a[s],c=l.event,k=t(M[s]),!1===(S=i("eventRender",c,c,k))?k.remove():(S&&!0!==S&&(k.remove(),k=t(S).css({position:"absolute",top:l.top,left:l.left}).appendTo(U)),l.element=k,c._id===o?it(c,k,l):k[0]._fci=s,A(c,k));for(I(U,a,it),s=0;s<B;s++)l=a[s],(k=l.element)&&(H=_[F=l.key=Q(k[0])],l.vsides=H===e?_[F]=Y(k,!0):H,H=j[F],l.hsides=H===e?j[F]=P(k,!0):H,(N=k.find("div.fc-event-content")).length&&(l.contentTop=N[0].offsetTop));for(s=0;s<B;s++)l=a[s],(k=l.element)&&(k[0].style.width=Math.max(0,l.outerWidth-l.hsides)+"px",W=Math.max(n.getSlotHeight()-l.vsides,l.outerHeight-l.vsides),k[0].style.height=W+"px",c=l.event,l.contentTop!==e&&W-l.contentTop<10&&(k.find("div.fc-event-time").text(Z(c.start,r("timeFormat"))+" - "+c.title),k.find("div.fc-event-title").remove()),$[l.col].positions.push({top:l.top,bottom:l.top+W+l.vsides}),i("eventAfterRender",c,c,k));for(s=0;s<G;s++){var K=null,tt=$[s],et=tt.positions;et=et.sort(function(t,e){return t.top-e.top}),t.each(et,function(t,e){K=null==K?e.bottom:Math.min(K,e.bottom)}),tt.min=K,tt.max=et.length?et[et.length-1].top:null}for(X.unbind("scroll").scroll(function(){var e=t(this).scrollTop();for(s=0;s<G;s++){var n=$[s];null!=n.min&&n.min<=e+10?t(q[s]).css("display",""):t(q[s]).css("display","none"),null!=n.max&&n.max>=e+X.height()-10?t(J[s]).css("display",""):t(J[s]).css("display","none")}}).trigger("scroll"),q.each(function(e,a){t(a).unbind("click").click(function(){var a=0,r=X.scrollTop();t.each($[e].positions,function(t,e){return e.bottom<=r+10&&(a=e.top),e.top<r}),X.scrollTop(a-n.getSlotHeight())})}),J.each(function(e,a){t(a).unbind("click").click(function(){var a=0,r=X.scrollTop();t.each($[e].positions,function(t,e){if(e.top>=r+X.height()-10)return a=e,!1}),X.scrollTop(a.bottom-a.top+n.getSlotHeight()>X.height()?a.top-n.getSlotHeight():a.bottom-X.height()+n.getSlotHeight()+1)})}),s=0;s<B;s++)(l=a[s]).event.source&&l.event.source.background&&t("td.fc-col"+l.col,n.element).addClass("fc-source-bg")})(function(e){var a,r,i,o,s,l,c=z(),d=S(),f=k(),u=b(M(n.visStart),d),h=t.map(e,at),v=[];for(a=0;a<c;a++){for(st(r=B(L(e,h,u,b(M(u),f-d)))),i=0;i<r.length;i++)for(o=r[i],s=0;s<o.length;s++)(l=o[s]).col=a,l.level=i,v.push(l);w(u,1,!0)}return v}(v),s),r("currentTimeIndicator")&&(window.clearInterval(a),a=window.setInterval(tt,3e4),tt());n.addedView&&n.addedView.renderEvents(o,s)},n.compileDaySegs=et,n.clearEvents=function(){d(),v().empty(),D().empty(),n.addedView&&n.addedView.clearEvents()},n.slotSegHtml=rt,n.bindDaySeg=function(t,e,a){o(t)&&function(t,e,a){var o,s,l,c=!0,d=r("isRTL")?-1:1,f=C(),u=N(),h=W(),v=S();function p(){c||(e.width(o).height("").draggable("option","grid",null),c=!0)}e.draggable({zIndex:9,scroll:!1,opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(v,m){i("eventDragStart",e,t,v,m),o=e.width(),f.start(function(i,o,f,v){if(X(),i){if(s=!1,l=v*d,i.row)if(a)if(c)e.width(u-10),_(e,h*Math.round((t.end?(t.end-t.start)/g:r("defaultEventMinutes"))/r("slotMinutes"))),e.draggable("option","grid",[u,1]),c=!1;else{var m=n.cellDate;if(i&&(i.col==o.col||!r("selectHelper"))){var y=m(i),D=t.end?function(t,e){return Math.round((M(t,!1)-M(e,!1))/g)}(t.end,t.start):r("defaultEventMinutes"),C=b(M(y,!1),D);dates=[y,C].sort(U),J(dates[0],dates[1])}}else s=!0;else q(w(M(t.start),l),w(O(t),l)),p();s=s||c&&!l}else p(),s=!0;e.draggable("option","revert",s)},v,"drag")},stop:function(n,a){if(f.stop(),X(),i("eventDragStop",e,t,n,a),s)p(),e.css("filter","");else{var o=0;c||(o=Math.round((e.offset().top-R().offset().top)/h)*r("slotMinutes")+v-(60*t.start.getHours()+t.start.getMinutes())),V(this,t,l,o,c,n,a)}}})}(t,e,a.isStart);a.isEnd&&s(t)&&H(t,e,a);f(t,e)},n.setTimeIndicator=tt,ct.call(n);var a,r=n.opt,i=n.trigger,o=n.isEventDraggable,s=n.isEventResizable,l=n.eventEnd,c=n.reportEvents,d=n.reportEventClear,f=n.eventElementHandlers,u=n.setHeight,h=n.setWidth,v=n.getDaySegmentContainer,p=n.getSlotJumpersTop,m=n.getSlotJumpersBottom,y=n.getslotScroller,D=(n.getSlotContent,n.getSlotSegmentContainer),C=n.getHoverListener,k=n.getMaxMinute,S=n.getMinMinute,T=n.timePosition,E=n.colContentLeft,x=n.colContentRight,F=n.renderDaySegs,H=n.resizableDayEvent,z=n.getColCnt,N=n.getColWidth,W=n.getSlotHeight,R=n.getBodyContent,A=n.reportEventElement,V=(n.showEvents,n.hideEvents,n.eventDrop),j=n.eventResize,q=n.renderDayOverlay,J=n.renderSlotSelection,X=n.clearOverlays,G=n.calendar,Z=G.formatDate,K=G.formatDates;function tt(){var e=R(),a=e.children(".fc-timeline"),r=e.children(".fc-timeline-arrow");0!=a.length&&0!=r.length||(a=t("<hr>").addClass("fc-timeline").appendTo(e),r=t("<div>").addClass("fc-timeline-arrow").appendTo(e));var i=new Date,o=t(".fc-today",n.element);if(!(o.length>0))return a.hide(),void r.hide();a.show(),r.show();var s=60*i.getHours()*60+60*i.getMinutes()+i.getSeconds(),l=s/86400;a.css("top",Math.floor(e.height()*l-1)+"px"),r.css("top",Math.floor(e.height()*l-1)-5+"px");var c=o.position().left,d=o.width();a.css({left:c+"px",width:d+"px"})}function et(e){var a,r,i,o,s=B(L(e,t.map(e,O),n.visStart,n.visEnd)),l=s.length,c=[];for(a=0;a<l;a++)for(r=s[a],i=0;i<r.length;i++)(o=r[i]).row=0,o.level=a,c.push(o);return c}function at(t){return t.end?M(t.end):b(M(t.start),r("defaultEventMinutes"))}function rt(t,e){var n="<",a=t.url,i=nt(t,r),l=i?" style='"+i+"'":"",c=["fc-event","fc-event-skin","fc-event-vert"];return o(t)&&c.push("fc-event-draggable"),e.isStart&&c.push("fc-corner-top"),e.isEnd&&c.push("fc-corner-bottom"),c=c.concat(t.className),t.source&&(c=c.concat(t.source.className||[])),n+=a?"a href='"+$(t.url)+"'":"div",n+=" class='"+c.join(" ")+"' style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+i+"'><div class='fc-event-inner fc-event-skin'"+l+"><div class='fc-event-head fc-event-skin'"+l+"><div class='fc-event-time'>"+$(K(t.start,t.end,r("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+$(t.title)+"</div></div><div class='fc-event-bg'></div></div>",e.isEnd&&s(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(a?"a":"div")+">"}function it(t,e,n){var a=e.find("div.fc-event-time");o(t)&&function(t,e,n){var a,o,s,l,c=!1,d=r("isRTL")?-1:1,f=C(),u=z(),h=N(),v=W();function p(e){var a,i=b(M(t.start),e);t.end&&(a=b(M(t.end),e)),n.text(K(i,a,r("timeFormat")))}function g(){c&&(n.css("display",""),e.draggable("option","grid",[h,v]),c=!1)}e.draggable({zIndex:9,scroll:!1,grid:[h,v],axis:1==u&&"y",opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(u,h){i("eventDragStart",e,t,u,h),a=e.position(),s=l=0,f.start(function(a,i,s,l){e.draggable("option","revert",!a),X(),a&&(o=l*d,r("allDaySlot")&&!a.row?(c||(c=!0,n.hide(),e.draggable("option","grid",null)),q(w(M(t.start),o),w(O(t),o))):g())},u,"drag")},drag:function(t,e){e.position.left=a.left+o*d*h,(s=Math.round((e.position.top-a.top)/v)*r("slotMinutes"))!=l&&(c||p(s),l=s)},stop:function(n,r){var l=f.stop();X(),i("eventDragStop",e,t,n,r),l&&(o||s||c)?V(this,t,o,c?0:s,c,n,r):(g(),e.css("filter",""),e.css(a),p(0))}})}(t,e,a),n.isEnd&&s(t)&&function(t,e,n){var a,o,s=W();e.resizable({handles:{s:"div.ui-resizable-s"},grid:s,start:function(n,r){a=o=0,e.css("z-index",9),i("eventResizeStart",this,t,n,r)},resize:function(i,c){(a=Math.round((Math.max(s,e.height())-c.originalSize.height)/s))!=o&&(n.text(K(t.start,a||t.end?b(l(t),r("slotMinutes")*a):null,r("timeFormat"))),o=a)},stop:function(n,o){i("eventResizeStop",this,t,n,o);var s=r("slotMinutes")*a;null===t.end&&(s+=r("defaultEventMinutes")),a?j(this,t,0,s,n,o):e.css("z-index",8)}})}(t,e,a),f(t,e)}}.call(i);var o,s,l,c,d,f,u,h,v,p,m,y,D,S,E,x,F,z,N,W,R,A,j,q,J,X,G,Z,at,rt,it,ot,pt,gt,bt,Ct,Mt,kt,St,Tt,Et,xt,Ft,Ht,zt,Nt,Wt,Ot,Rt=i.opt,At=i.trigger,Lt=i.clearEvents,Bt=i.renderOverlay,It=i.clearOverlays,Vt=i.reportSelection,_t=i.unselect,Pt=i.daySelectionMousedown,Yt=i.slotSegHtml,jt=a.formatDate,qt=i.setTimeIndicator,Jt={};function Ut(){var t,e,n,a=C(new Date);for(t=0;t<bt;t++)n=ce(t),e=d.eq(t),+n==+a?(e.addClass(Tt+"-state-highlight fc-today"),wt(e)):(e.removeClass(Tt+"-state-highlight fc-today"),Dt(e))}function Xt(){var e=Rt("slotMinutes")%15==0,n=k();b(n,Nt),A.find("th").each(function(a,r){var i=n.getMinutes();t(r).html(e&&i?"&nbsp;":jt(n,Rt("axisFormat"))),b(n,Rt("slotMinutes"))})}function Gt(){$t()}function Zt(){$t()}function $t(){var e=Rt("startOfBusiness")*(60/Rt("slotMinutes")),n=(Rt("endOfBusiness")-Rt("slotMinutes")/60)*(60/Rt("slotMinutes"));A.find("tr").each(function(a,r){a<e||a>n?t(r).addClass("fc-non-business-hours"):t(r).removeClass("fc-non-business-hours")})}function Qt(){l.each(function(e,n){et(t(n),ce(e),Rt)}),d.each(function(e,n){et(t(n),ce(e),Rt)})}function Kt(){ee(m.find("td")),ne(A.find("td"))}function te(){ee(m.find("td")),ne(A.find("td"))}function ee(t){t.unbind("click dblclick"),"double"==Rt("bindingMode")?t.dblclick(ae).mousedown(Pt):t.click(ae).mousedown(Pt)}function ne(t){t.unbind("click dblclick"),"double"==Rt("bindingMode")?t.dblclick(re).mousedown(pe):t.click(re).mousedown(pe)}function ae(t){var e=Math.min(bt-1,Math.floor((t.pageX-o.offset().left-rt)/it)),n=ce(e);At("dayClick",d[e],n,!0,t)}function re(t){var e=Math.min(bt-1,Math.floor((t.pageX-o.offset().left-rt)/it)),n=ce(e),a=this.parentNode.className.match(/fc-slot(\d+)/);if(a){var r=parseInt(a[1])*Rt("slotMinutes"),i=Math.floor(r/60);n.setHours(i),n.setMinutes(r%60+Nt),At("dayClick",d[e],n,!1,t)}else At("dayClick",d[e],n,!0,t)}function ie(t,e,n){n&&Mt.build();var a,r,o=M(i.visStart);Ft?(a=T(e,o)*Ht+zt+1,r=T(t,o)*Ht+zt+1):(a=T(t,o),r=T(e,o)),(a=Math.max(0,a))<(r=Math.min(bt,r))&&ee(oe(0,a,0,r-1))}function oe(t,e,n,a){var r=Mt.rect(t,e,n,a,v);return Bt(r,v)}function se(t,e){for(var n=M(i.visStart),a=w(M(n),1),r=0;r<bt;r++){var o=new Date(Math.max(n,t)),s=new Date(Math.min(a,e));if(o<s){var l=r*Ht+zt,c=Mt.rect(0,l,0,l,F),d=ue(n,o),f=ue(n,s);c.top=d,c.height=f-d,ne(Bt(c,F))}w(n,1),w(a,1)}}function le(t){var e=ce(t.col),n=t.row;return Rt("allDaySlot")&&n--,n>=0&&b(e,Nt+n*Rt("slotMinutes")),e}function ce(t){return w(M(i.visStart),t*Ht+zt)}function de(t){return Rt("allDaySlot")&&!t.row}function fe(t){return(t-Math.max(Et,xt)+bt)%bt*Ht+zt}function ue(t,n){if(t=M(t,!0),n<b(M(t),Nt))return 0;if(n>=b(M(t),Wt))return A.height();var a=Rt("slotMinutes"),r=60*n.getHours()+n.getMinutes()-Nt,i=Math.floor(r/a),o=Jt[i];return o===e&&(o=Jt[i]=A.find("tr:eq("+i+") td div")[0].offsetTop),Math.max(0,Math.round(o-1+pt*(r%a/a)))}function he(e,n){var a=Rt("selectHelper");if(Mt.build(),a){var r=T(e,i.visStart)*Ht+zt;if(r>=0&&r<bt){var o=Mt.rect(0,r,0,r,F),s=ue(e,e),l=ue(e,n);if(l>s){if(o.top=s,o.height=l-s,o.left+=2,o.width-=5,t.isFunction(a)){var c=a(e,n);c&&(o.position="absolute",o.zIndex=8,G=t(c).css(o).appendTo(F))}else o.isStart=!0,o.isEnd=!0,(G=t(Yt({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o))).css("opacity",Rt("dragOpacity"));G&&(ne(G),F.append(G),V(G,o.width,!0),_(G,o.height,!0))}}}else se(e,n)}function ve(){It(),G&&(G.remove(),G=null)}function pe(e){var n;1==e.which&&Rt("selectable")&&(_t(e),kt.start(function(t,e){if(ve(),!t||t.col!=e.col&&Rt("selectHelper")||de(t))n=null;else{var a=le(e),r=le(t);he((n=[a,b(M(a),Rt("slotMinutes")),r,b(M(r),Rt("slotMinutes"))].sort(U))[0],n[3])}},e),t(document).one("mouseup",function(t){kt.stop(),n&&(n[0],n[1],Vt(n[0],n[3],!1,t))}))}K(n.addClass("fc-agenda")),Mt=new ut(function(e,n){var a,r,i;l.each(function(e,o){a=t(o),r=a.offset().left,e&&(i[1]=r),i=[r],n[e]=i}),i[1]=r+a.outerWidth(),Rt("allDaySlot")&&(r=(a=m).offset().top,e[0]=[r,r+a.outerHeight()]);var o=F.offset().top,s=x.offset().top,c=s+x.outerHeight();function d(t){return Math.max(s,Math.min(c,t))}for(var f=0;f<Ct;f++)e.push([d(o+pt*f),d(o+pt*(f+1))])}),kt=new ht(Mt),St=new vt(function(t){return f.eq(t)})}function st(t){var e,n,a,r,i,o;for(e=t.length-1;e>0;e--)for(r=t[e],n=0;n<r.length;n++)for(i=r[n],a=0;a<t[e-1].length;a++)A(i,o=t[e-1][a])&&(o.forward=Math.max(o.forward||0,(i.forward||0)+1))}function lt(n,a,r){var i=this;i.element=n,i.calendar=a,i.name=r,i.opt=h,i.trigger=v,i.isEventDraggable=function(t){return p(t)&&!h("disableDragging")},i.isEventResizable=function(t){return p(t)&&!h("disableResizing")},i.reportEvents=function(t){c={};var e,n,a=t.length;for(e=0;e<a;e++)n=t[e],c[n._id]?c[n._id].push(n):c[n._id]=[n]},i.eventEnd=g,i.reportEventElement=function(t,e){d.push(e),f[t._id]?f[t._id].push(e):f[t._id]=[e]},i.reportEventClear=function(){d=[],f={}},i.eventElementHandlers=function(e,n){n.click(function(t){if(!n.hasClass("ui-draggable-dragging")&&!n.hasClass("ui-resizable-resizing"))return m(n,!0),v("eventClick",this,e,t)}).hover(function(t){v("eventMouseover",this,e,t)},function(t){v("eventMouseout",this,e,t)}),n.find(".fc-event-checkbox").click(function(n){v("eventCheckClicked",this,t(this),e,n)})},i.showEvents=function(t,e){y(t,e,"show")},i.hideEvents=function(t,e){y(t,e,"hide")},i.eventDrop=function(t,e,n,a,r,i,o){var s=e.allDay,c=e._id;D([e],n,a,r),v("eventDrop",t,e,n,a,r,function(){D([e],-n,-a,s),l(c)},i,o),l(c)},i.eventResize=function(t,e,n,a,r,i){var o=e._id;C([e],n,a),v("eventResize",t,e,n,a,function(){C([e],-n,-a),l(o)},r,i),l(o)},i.selectedElement=null,i.selectEvent=m;var o=i.defaultEventEnd,s=a.normalizeEvent,l=a.reportEventChange,c={},d=[],f={},u=a.options;function h(e,n){var a=u[e];return"object"!=typeof a||a.length||t.isArray(a)?a:Z(a,n||r)}function v(t,e){return a.trigger.apply(a,[t,e||i].concat(Array.prototype.slice.call(arguments,2),[i]))}function p(t){return rt(t.editable,(t.source||{}).editable,h("editable"))}function g(t){return t.end?M(t.end):o(t)}function m(e,n){if("todo"!=i.name||i.eventSelectLock<0)return!1;if(void 0!==e&&null!=e&&0!=e.length||(e=i.getDaySegmentContainer().find(t('.fc-event[data-repeat-hash="'+i.selectedElement+'"]:visible'))),0==e.length&&(e=i.element.find(".fc-event:visible:first")),0==e.length)return v("selectEmpty"),!1;i.selectedElement=e.attr("data-repeat-hash"),i.element.find(".fc-event-selected").removeClass("fc-event-selected"),e.addClass("fc-event-selected");var a=e.position().top;if(a<e.outerHeight()||a>i.getDaySegmentContainer().parent().height()){var r=i.getDaySegmentContainer().parent().scrollTop();i.getDaySegmentContainer().parent().scrollTop(r+a-.2*i.getDaySegmentContainer().parent().height())}n||e.trigger("mouseover").trigger("click")}function y(t,e,n){t[n]()}function D(t,n,a,r){a=a||0;for(var i,o=t.length,l=0;l<o;l++)i=t[l],r!==e&&(i.allDay=r),b(w(i.start,n,!0),a),i.end&&(i.end=b(w(i.end,n,!0),a)),s(i,u)}function C(t,e,n){n=n||0;for(var a,r=t.length,i=0;i<r;i++)(a=t[i]).end=b(w(g(a),e,!0),n),s(a,u)}}function ct(){var n=this;n.renderDaySegs=function(e,a,r){var i,o,s,d,f,u,p,g=k(),m=h(),y=v(),w=0,D=e.length;for(g[0].innerHTML=H(e),z(e,g.children()),function(t){var e,n,a,r=t.length;for(e=0;e<r;e++)n=t[e],(a=n.element)&&l(n.event,a)}(e),function(t,e,n){var a,r,i,o,s=t.length;for(a=0;a<s;a++)r=t[a],(i=r.element)&&((o=r.event)._id===n?S(o,i,r):i[0]._fci=a);I(e,t,S)}(e,g,a),N(e),W(e),O(e),i=R(),o=0;o<m;o++){for(0,s=[],d=0;d<y;d++)s[d]=0;for(;w<D&&(f=e[w]).row==o;){for(u=X(s.slice(f.startCol,f.endCol)),f.top=u,void 0!==f.outerHeight&&(u+=f.outerHeight),p=f.startCol;p<f.endCol;p++)s[p]=u;w++}r&&g.parent().height(X(s)?X(s)+3:0),i[o].height(X(s))}if(L(e,A(i)),t(".fc-source-bg",n.element).removeClass("fc-source-bg"),r){for(w=0;w<D;w++)if((f=e[w]).event.source&&f.event.source.background)for(c=f.startCol;c<f.endCol;c++)t("td.fc-col"+c,n.element).addClass("fc-source-bg")}else for(w=0;w<D;w++)if((f=e[w]).event.source&&f.event.source.background)for(c=f.startCol;c<f.endCol;c++)t("td.fc-day"+(7*f.row+c),n.element).addClass("fc-source-bg")},n.resizableDayEvent=function(e,i,o){var l=a("isRTL"),c=l?"w":"e",p=i.find("div.ui-resizable-"+c),g=!1;K(i),i.mousedown(function(t){t.preventDefault()}).click(function(t){g&&(t.preventDefault(),t.stopImmediatePropagation())}),p.mousedown(function(a){if(1==a.which){g=!0;var p,m,y=n.getHoverListener(),D=h(),S=v(),T=l?-1:1,B=l?S-1:0,I=i.css("top"),V=t.extend({},e),_=b(e.start);F(),t("body").css("cursor",c+"-resize").one("mouseup",function(n){r("eventResizeStop",this,e,n),t("body").css("cursor",""),y.stop(),x(),p&&u(this,e,p,0,n);setTimeout(function(){g=!1},0)}),r("eventResizeStart",this,e,a),y.start(function(n,u){if(n){var h=Math.max(_.row,n.row),v=n.col;1==D&&(h=0),h==_.row&&(v=l?Math.min(_.col,v):Math.max(_.col,v)),p=7*h+v*T+B-(7*u.row+u.col*T+B);var g=w(s(e),p,!0);if(p){V.end=g;var y=m;(m=function(e,n,a){var r,i,o,s=t("<div/>"),l=k(),c=e.length;for(s[0].innerHTML=H(e),r=s.children(),l.append(r),z(e,r),N(e),W(e),O(e),L(e,A(R())),r=[],i=0;i<c;i++)(o=e[i].element)&&(e[i].row===n&&o.css("top",a),r.push(o[0]));return t(r)}(C([V]),o.row,I)).find("*").css("cursor",c+"-resize"),r("eventResizeHelperCreated",this,e,a,i,m),y&&y.remove(),f(i)}else m&&(d(i),m.remove(),m=null);x(),E(e.start,w(M(g),1))}},a)}})};var a=n.opt,r=n.trigger,i=n.isEventDraggable,o=n.isEventResizable,s=n.eventEnd,l=n.reportEventElement,d=n.showEvents,f=n.hideEvents,u=n.eventResize,h=n.getRowCnt,v=n.getColCnt,p=(n.getColWidth,n.allDayRow),g=n.allDayBounds,m=n.colContentLeft,y=n.colContentRight,D=n.dayOfWeekCol,b=n.dateCell,C=n.compileDaySegs,k=n.getDaySegmentContainer,S=n.bindDaySeg,T=n.calendar.formatDates,E=n.renderDayOverlay,x=n.clearOverlays,F=n.clearSelection;function H(t){var e,n,r,s,l,c,d,f,u,h,v,p=a("isRTL"),w=t.length,b=g(),C=b.left,M=b.right,k="";for(e=0;e<w;e++)r=(n=t[e]).event,l=["fc-event","fc-event-skin","fc-event-hori"],i(r)&&l.push("fc-event-draggable"),p?(n.isStart&&l.push("fc-corner-right"),n.isEnd&&l.push("fc-corner-left"),c=D(n.end.getDay()-1),d=D(n.start.getDay()),f=n.isEnd?m(c):C,u=n.isStart?y(d):M):(n.isStart&&l.push("fc-corner-left"),n.isEnd&&l.push("fc-corner-right"),c=D(n.start.getDay()),d=D(n.end.getDay()-1),f=n.isStart?m(c):C,u=n.isEnd?y(d):M),h=u-f-2-2-2,l=l.concat(r.className),r.source&&(l=l.concat(r.source.className||[])),s=r.url,v=nt(r,a),k+=s?"<a href='"+$(s)+"'":"<div",k+=" class='"+l.join(" ")+"' style='position:absolute;z-index:8;left:"+f+"px;"+v+"'><div class='fc-event-inner fc-event-skin' style='width:"+h+"px;z-index:inherit;"+(v||"")+"'>",a("dayEventSizeStrict")&&(k+="<div class='fc-event-title-strict'>"),!r.allDay&&n.isStart&&a("timeFormat")&&(k+="<span class='fc-event-time'>"+$(T(r.start,r.end,a("timeFormat")))+"</span>"),k+="<span class='fc-event-title'>"+$(r.title.replace(/(\r\n|\n|\r)+/gm," "))+"</span>",a("dayEventSizeStrict")&&(k+="</div>"),k+="</div>",n.isEnd&&o(r)&&(k+="<div class='ui-resizable-handle ui-resizable-"+(p?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),k+="<div class='fc-event-bg'></div></"+(s?"a":"div")+">",n.left=f,n.outerWidth=u-f,n.startCol=c,n.endCol=d+1;return k}function z(e,n){var a,i,o,s,l,c=e.length;for(a=0;a<c;a++)o=(i=e[a]).event,s=t(n[a]),!1===(l=r("eventRender",o,o,s))?s.remove():(l&&!0!==l&&(l=t(l).css({position:"absolute",left:i.left}),s.replaceWith(l),s=l),i.element=s)}function N(t){var n,a,r,i,o,s=t.length,l={};for(n=0;n<s;n++)(r=(a=t[n]).element)&&((o=l[i=a.key=Q(r[0])])===e&&(o=l[i]=P(r,!0)),a.hsides=o)}function W(t){var e,n,a,r=t.length;for(e=0;e<r;e++)(a=(n=t[e]).element)&&(a[0].style.width=Math.max(0,n.outerWidth-n.hsides)+"px")}function O(t){var n,a,r,i,o,s=t.length,l={};for(n=0;n<s;n++)(r=(a=t[n]).element)?((o=l[i=a.key])===e&&(o=l[i]=j(r)),a.outerHeight=r[0].offsetHeight+o):a.outerHeight=0}function R(){var t,e=h(),n=[];for(t=0;t<e;t++)n[t]=p(t).find("td:first div.fc-day-content > div");return n}function A(t){var e,n=t.length,a=[];for(e=0;e<n;e++)a[e]=t[e][0].offsetTop;return a}function L(t,e){var n,a,i,o,s=t.length;for(n=0;n<s;n++)(i=(a=t[n]).element)&&(i[0].style.top=e[a.row]+(a.top||0)+"px",o=a.event,r("eventAfterRender",o,o,i))}}function dt(){var e=this;e.select=function(t,e,n){l(),e||(e=r(t,n));i(t,e,n),c(t,e,n)},e.unselect=l,e.reportSelection=c,e.daySelectionMousedown=function(a){var r=e.cellDate,s=e.cellIsAllDay,d=e.getHoverListener();e.reportDayClick;if(1==a.which&&n("selectable")){l(a);var f;d.start(function(t,e){o(),t&&s(t)?(f=[r(e),r(t)].sort(U),i(f[0],f[1],!0)):f=null},a),t(document).one("mouseup",function(t){d.stop(),f&&(f[0],f[1],c(f[0],f[1],!0,t))})}};var n=e.opt,a=e.trigger,r=e.defaultSelectionEnd,i=e.renderSelection,o=e.clearSelection,s=!1;function l(t){s&&(s=!1,o(),a("unselect",null,t))}function c(t,e,n,r){s=!0,a("select",null,t,e,n,r)}n("selectable")&&n("unselectAuto")&&t(document).mousedown(function(e){var a=n("unselectCancel");a&&t(e.target).parents(a).length||l(e)})}function ft(){this.renderOverlay=function(a,r){var i=n.shift();i||(i=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));i[0].parentNode!=r[0]&&i.appendTo(r);return e.push(i.css(a).show()),i},this.clearOverlays=function(){var t;for(;t=e.shift();)n.push(t.hide().unbind())};var e=[],n=[]}function ut(t){var e,n,a=this;a.build=function(){t(e=[],n=[])},a.cell=function(t,a){var r,i=e.length,o=n.length,s=-1,l=-1;for(r=0;r<i;r++)if(a>=e[r][0]&&a<e[r][1]){s=r;break}for(r=0;r<o;r++)if(t>=n[r][0]&&t<n[r][1]){l=r;break}return s>=0&&l>=0?{row:s,col:l}:null},a.rect=function(t,a,r,i,o){var s=o.offset();return{top:e[t][0]-s.top,left:n[a][0]-s.left,width:n[i][1]-n[a][0],height:e[r][1]-e[t][0]}}}function ht(n){var a,r,i,o,s;function l(t){var a;if((a=t).pageX===e&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY),s.pageX-t.pageX==0&&s.pageY-t.pageY==0)return!1;var l=n.cell(t.pageX,t.pageY);(!l!=!o||l&&(l.row!=o.row||l.col!=o.col))&&(l?(i||(i=l),r(l,i,l.row-i.row,l.col-i.col)):r(l,i),o=l)}this.start=function(e,c,d){s=c,r=e,i=o=null,n.build(),l(c),a=d||"mousemove",t(document).bind(a,l)},this.stop=function(){return t(document).unbind(a,l),o}}function vt(t){var n=this,a={},r={},i={};function o(e){return a[e]=a[e]||t(e)}n.left=function(t){return r[t]=r[t]===e?o(t).position().left:r[t]},n.right=function(t){return i[t]=i[t]===e?n.left(t)+o(t).width():i[t]},n.clear=function(){a={},r={},i={}}}function pt(t,e){target=t.find(".fc-day-text"),target.html(e)}function gt(t,e){target=t.find(".fc-day-text"),target.html("")}function mt(t,e){target=t.find(".fc-week-number"),target.html(bt(e))}function yt(t,e){target=t.find(".fc-week-number"),target.html("")}function wt(e){var n=e.attr("class").split(" "),a=["fc-state-highlight","fc-today","fc-widget-content","fc-source-bg"];(n=t.grep(n,function(e){return!(t.inArray(e,a)>-1)})).push("fc-widget-header"),t("."+n.join(".")).addClass("fc-today")}function Dt(e){var n=e.attr("class").split(" "),a=["fc-state-highlight","fc-today","fc-widget-content","fc-source-bg"];(n=t.grep(n,function(e){return!(t.inArray(e,a)>-1)})).push("fc-widget-header"),t("."+n.join(".")).removeClass("fc-today")}function bt(t){var e=new Date(t.getFullYear(),0,4,t.getHours()),n=(e.getDay()-1+7)%7,a=Math.round((t-e)/864e5),r=Math.floor((a+n)/7)+1,i=(t.getDay()-1+7)%7;return 11==t.getMonth()&&t.getDate()>=28?i<(n=((e=new Date(t.getFullYear()+1,0,4,t.getHours())).getDay()-1+7)%7)?1:bt(new Date(t.valueOf()-6048e5))+1:0==r&&i>3&&0==t.getMonth()?bt(new Date(t.valueOf()-6048e5))+1:r}function Ct(){var n=this;n.renderEvents=function(e,n){e.sort(p),i(e),function(e,n){var i,o,d,f,u,h,v,p,y,w,D,b,C,M=a("theme")?"ui":"fc",k=M+"-widget-header",S=M+"-widget-content";for(o=0;o<e.length;o++){for((d=e[o]).title&&t('<div class="fc-list-header '+k+'">'+$(d.title)+"</div>").appendTo(c()),w=t("<div>").addClass("fc-list-section "+S).appendTo(c()),h="",i=0;i<d.events.length;i++)f=d.events[i],u=g(f,d),v=nt(f,a),p=v?" style='"+v+"'":"",y=["fc-event","fc-event-skin","fc-event-vert","fc-corner-top","fc-corner-bottom"].concat(f.className),f.source&&f.source.className&&(y=y.concat(f.source.className)),h+="<div class='"+y.join(" ")+"'"+p+"><div class='fc-event-inner fc-event-skin'"+p+"><div class='fc-event-head fc-event-skin'"+p+"><div class='fc-event-time'>"+(u[0]?'<span class="fc-col-date">'+u[0]+"</span> ":"")+(u[1]?'<span class="fc-col-time">'+u[1]+"</span>":"")+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+$(f.title.replace(/(\r\n|\n|\r)+/gm," "))+"</div></div><div class='fc-event-bg'></div></div></div>";for(w[0].innerHTML=h,b=w.children(),i=0;i<d.events.length;i++)f=d.events[i],D=t(b[i]),!1===(C=r("eventRender",f,f,D))?D.remove():(C&&!0!==C&&(D.remove(),D=t(C).appendTo(w)),f._id===n?l(f,D,d):D[0]._fci=i,s(f,D));m(w,d,l)}tt(c())}(h(e),n)},n.renderEventTime=g,n.compileDaySegs=h,n.clearEvents=function(){o(),c().empty()},n.lazySegBind=m,n.sortCmp=p,ct.call(n);var a=n.opt,r=n.trigger,i=n.reportEvents,o=n.reportEventClear,s=n.reportEventElement,l=n.eventElementHandlers,c=(n.showEvents,n.hideEvents,n.getDaySegmentContainer),d=n.calendar,f=d.formatDate,u=d.formatDates;function h(t){var e,r,i,o,s,l,c,d,u={},h=a("columnFormat",n.name),v=a("firstDay"),p=a("listSections"),g=C(new Date),m=w(M(g),-(g.getDay()-v+7)%7);for(r=0;r<t.length;r++){var y=(e=t[r]).end?M(e.end):M(e.start);if(!(y<n.start||e.start>n.visEnd)){var D=M(e.start<n.start?n.start:e.start,!0),b=T(M(y>n.visEnd?n.visEnd:y,!0),D);for(i=0;i<=b;i++)(d=M(D)).setDate(d.getDate()+i),o=T(d,g),s=Math.floor(T(d,m)/7),l=d.getMonth()+12*(d.getYear()-g.getYear())-g.getMonth(),"smart"==p?o<0?c=a("listTexts","past"):0==o?c=a("listTexts","today"):1==o?c=a("listTexts","tomorrow"):0==s?c=a("listTexts","thisWeek"):1==s?c=a("listTexts","nextWeek"):0==l?c=a("listTexts","thisMonth"):1==l?c=a("listTexts","nextMonth"):l>1&&(c=a("listTexts","future")):c="month"==p?f(d,"MMMM yyyy"):"week"==p?a("listTexts","week")+f(d," W"):"day"==p?f(d,h):"",c in u||(u[c]={events:[],start:d,title:c,daydiff:o,weekdiff:s,monthdiff:l}),u[c].events.push(e)}}return u}function p(t,e){var n=t.start.getTime()-e.start.getTime();if(0==n){var a=t.end?t.end:t.start,r=e.end?e.end:e.start;n=a.getTime()-r.getTime()}return 0==n&&(t.compareString<e.compareString?n=-1:e.compareString<t.compareString&&(n=1)),n}function g(t,e){var n=a("timeFormat","list"),r=a("timeFormat","listFull"),i=a("timeFormat","listFullAllDay"),o=a("columnFormat"),s=a("listSections"),l=t.end?M(t.end):M(t.start),c=l.getTime()-t.start.getTime(),d="",h="";return"smart"==s?t.start<e.start?d=a("listTexts","until")+" "+f(l,t.allDay||l.getDate()!=e.start.getDate()?o:n):c>v?d=u(t.start,l,o+"{ – "+o+"}"):0==e.daydiff?d=a("listTexts","today"):1==e.daydiff?d=a("listTexts","tomorrow"):0==e.weekdiff||1==e.weekdiff?d=f(t.start,"dddd"):(e.daydiff>1||e.daydiff<0)&&(d=f(t.start,o)):"day"!=s&&(d=u(t.start,l,o+(c>v?"{ – "+o+"}":""))),!d&&t.allDay?h=T(l,t.start)?u(t.start,l,i):a("allDayText"):d&&T(l,t.start)||t.allDay||(h=T(l,t.start)?u(t.start,l,r):u(t.start,c?l:null,n)),[d,h]}function m(n,a,r){n.unbind("mouseover").mouseover(function(i){for(var o,s,l=i.target,c=l;l!=this;)c=l,l=l.parentNode;(o=c._fci)!==e&&(c._fci=e,s=a.events[o],r(s,n.children().eq(o),a),t(i.target).trigger(i)),i.stopPropagation()})}}function Mt(){var e=this;Ct.call(e);var n,a,r=e.opt,i=e.sortCmp,o=e.trigger,s=e.getOrigDate,l=e.compileDaySegs,c=e.reportEvents,d=e.reportEventClear,f=e.reportEventElement,u=e.eventElementHandlers,v=e.renderEventTime,p=(e.showEvents,e.hideEvents,e.getDaySegmentContainer),g=e.lazySegBind,m=e.calendar,y=m.formatDate;m.formatDates;function w(n){var a,i,o=r("columnFormat",e.name),s=M(n,!1),l=!1;if(1==s.getDate())p().parent().scrollTop(0);else for(;!l;)i=y(s,o),p().find("td.fc-list-header.fc-widget-header").each(function(){if(t(this).html()==i){l=!0;var e=t(this).position().top,n=p().parent().scrollTop();p().parent().scrollTop(n+e)}}),l||((a=M(s,!1)).setDate(a.getDate()+1),a.getDate()>s.getDate()?s=M(a,!1):(l=!0,p().parent().scrollTop(p().height())))}e.renderEvents=function(d,y){d.sort(i),c(d),function(i,s){var l,c,d,y,w,D,b,C,k,S,T,E,x,F,H,z=r("theme")?"ui":"fc",N=p(),W=z+"-widget-header",O=z+"-widget-content",R=null,A=r("tableCols"),L=t.inArray("time",A)>=0;for(c in(n=t('<tbody class="fc-list-header"><tr><td class="fc-list-header fc-month-nav fc-month-prev '+W+'" colspan="'+A.length+'">'+r("buttonText","prevMonth")+"</td></tr></tbody>").appendTo(N)).click(function(){var t=M(e.getOrigDate(),!0);t.setDate(0),m.gotoDate(t),o("prevClick")}),i){if(d=i[c],b=!1,d.title)var R=t('<tbody class="fc-list-header"><tr><td class="fc-list-header '+W+'" colspan="'+A.length+'">'+$(d.title)+"</td></tr></tbody>").appendTo(N);for(E=t("<tbody>").addClass("fc-list-section "+O).appendTo(N),D="",l=0;l<d.events.length;l++){y=d.events[l],w=v(y,d),C=nt(y,r),k=C?" style='"+C+"'":"",S=["fc-event-skin","fc-corner-left","fc-corner-right","fc-corner-top","fc-corner-bottom"].concat(y.className),y.source&&y.source.className&&(S=S.concat(y.source.className)),y.source&&y.source.background&&(b=!0),T=["fc-"+h[y.start.getDay()],"fc-event","fc-event-row"],r("weekendDays").length>0&&-1!=r("weekendDays").indexOf(i[c].start.getDay())&&T.splice(1,0,"fc-weekend-day"),0==d.daydiff&&(R&&R.addClass("fc-today"),T.push("fc-today"),T.push("fc-state-highlight")),D+="<tr class='"+T.join(" ")+"'>";for(var B,I=0;I<A.length;I++)"handle"==(B=A[I])?D+="<td class='fc-event-handle'"+k+"></td>":"title"==B?D+="<td class='fc-event-title'>"+(y.title?$(y.title.replace(/(\r\n|\n|\r)+/gm," ")):"&nbsp;")+"</td>":"date"==B?D+="<td class='fc-event-date' colspan='"+(w[1]||!L?1:2)+"'>"+$(w[0])+"</td>":"time"==B?w[1]&&(D+="<td class='fc-event-time' style='text-overflow: ellipsis; overflow: hidden;'>"+$(w[1])+"</td>"):D+="<td class='fc-event-"+B+"'>"+(y[B]?$(y[B]):"&nbsp;")+"</td>";D+="</tr>",document.all&&(t(D).appendTo(E),D="")}for(document.all||(E[0].innerHTML=D),x=E.children(),l=0;l<d.events.length;l++)y=d.events[l],F=t(x[l]),b&&F.addClass("fc-source-bg"),!1===(H=o("eventRender",y,y,F))?F.remove():(H&&!0!==H&&(F.remove(),F=t(H).appendTo(E)),y._id===s?u(y,F,d):F[0]._fci=l,f(y,F)),o("eventAfterRender",y,y,F);g(E,d,u),tt(E),E.addClass("fc-day-"+d.start.getDay())}(a=t('<tbody class="fc-list-header"><tr><td class="fc-list-header fc-month-nav fc-month-next '+W+'" colspan="'+A.length+'">'+r("buttonText","nextMonth")+"</td></tr></tbody>").appendTo(N)).click(function(){var t=M(e.getOrigDate(),!0);t.setDate(1),t.setMonth(t.getMonth()+1),m.gotoDate(t),o("nextClick")})}(l(d),y),p().removeClass("fc-list-smart fc-list-day fc-list-month fc-list-week").addClass("fc-list-"+r("listSections")),w(s())},e.scrollToDate=w,e.clearEvents=function(){d(),p().children("tbody").remove()},e.prevMonthNav=n,e.nextMonthNav=a}function kt(){var n=this;n.renderEvents=function(e,c){e.sort(r),l(e),function(e,r){var i,s,l,c,p,g,m,y,D,b,C,k,S,T=a("theme")?"ui":"fc",E=h(),x=T+"-widget-content",F=a("todoCols");t.inArray("time",F);for(i in e){if(l=e[i],b=t("<tbody>").addClass("fc-list-section "+x).appendTo(E),p="",c=l.events[0],s=0,a("showUnstartedEvents")&&l.events.length>1){for(;s<l.events.length;s++)if(l.events[s].start<n.end){c=l.events[s];break}if(s==l.events.length)continue}dueTime=u(c),g=nt(c,a),m=g?" style='"+g+"'":"",y=["fc-event-skin","fc-corner-left","fc-corner-right","fc-corner-top","fc-corner-bottom"].concat(c.className),c.source&&c.source.className&&(y=y.concat(c.source.className)),D=["fc-event","fc-event-row"],c.end&&c.end.getTime()<M(n.start,!0)?D.push("fc-event-pastdue"):c.end&&c.end.getTime()<w(M(n.start),2,!1).getTime()&&D.push("fc-event-urgent"),c.filterStatus&&D.push("fc-event-"+c.filterStatus),p+="<tr class='"+D.join(" ")+"'>";for(var H,z=0;z<F.length;z++)H=F[z],p+="handle"==H?"<td class='fc-event-handle'"+m+"></td>":"check"==H?'<td class=\'fc-event-check\'><input type="checkbox" class="fc-event-checkbox" data-ind="false"/></td>':"priority"==H?"<td class='fc-event-priority fc-event-priority-"+c.renderPriority+"'>"+(c.renderPriority?"&nbsp;":"")+"</td>":"time"==H?"<td class='fc-event-time'>"+$(dueTime)+"</td>":"title"==H?"<td class='fc-event-title'>"+$(c.title.replace(/(\r\n|\n|\r)+/gm," "))+"</td>":"location"==H?"<td class='fc-event-location'>"+$(c.location.replace(/(\r\n|\n|\r)+/gm," "))+"</td>":"status"==H?"<td class='fc-event-status'></td>":"percent"==H?"<td class='fc-event-percent'>"+c.percent+"%</td>":"<td class='fc-event-"+H+"'>"+(c[H]?$(c[H]):"&nbsp;")+"</td>";p+="</tr>",document.all&&(t(p).appendTo(b),p=""),document.all||(b[0].innerHTML=p),C=b.children(),k=t(C[0]),!1===(S=o("eventRender",c,c,k))?k.remove():(S&&!0!==S&&(k.remove(),k=t(S).appendTo(b)),c._id===r?f(c,k,l):k[0]._fci=s,d(c,k)),o("eventCheckDefault",c,c,k.find(".fc-event-checkbox")),o("eventAfterRender",c,c,k),v(b,l,f),tt(b)}}(function(e){var n={},a=t.map(e,function(t,e){return e}),r=t.map(e,function(t,e){return t});for(i=a.length-1;i>-1;i--)n[a[i]]=r[i];return n}(s(e)),c),h().removeClass("fc-list-smart fc-list-day fc-list-month fc-list-week").addClass("fc-list-"+a("listSections")),n.applyFilters()},n.clearEvents=function(){c(),h().children("tbody").remove()},n.renderEventTime=u,n.compileDaySegs=s,n.lazySegBind=v,n.sortCmp=r,ct.call(n);var a=n.opt,r=n.sortCmp,o=n.trigger,s=n.compileDaySegs,l=n.reportEvents,c=n.reportEventClear,d=n.reportEventElement,f=n.eventElementHandlers,u=n.renderEventTime,h=(n.showEvents,n.hideEvents,n.getDaySegmentContainer),v=n.lazySegBind,p=n.calendar,g=p.formatDate;p.formatDates;function s(t){var e,r,i={};for(r=t.length-1;r>-1;r--){var o=(e=t[r]).repeatHash;e.end?M(e.end):M(e.start);e.completedOn&&e.completedOn<n.start&&(a("showUnstartedEvents")||!e.start||e.completedOn>e.start)||!a("showUnstartedEvents")&&e.start&&e.start>n.visEnd||(o in i||(i[o]={events:[],id:o}),i[o].events.push(e))}return i}function r(t,e){var n=t.end?t.end.getTime():1/0,a=e.end?e.end.getTime():1/0,r=t.start?t.start.getTime():1/0,i=e.start?e.start.getTime():1/0,o=parseInt(t.priority,10)||10,s=parseInt(e.priority,10)||10,l={"NEEDS-ACTION":1,"IN-PROCESS":2,COMPLETED:3,CANCELLED:4};return n<a?-1:a<n?1:r<i?-1:i<r?1:o<s?-1:s<o?1:l[t.status]<l[e.status]?-1:l[e.status]<l[t.status]?1:t.percent<e.percent?-1:e.percent<t.percent?1:t.compareString<e.compareString?-1:e.compareString<t.compareString?1:0}function u(t){var e=a("timeFormat","list");return t.end?g(t.end,e):""}function v(n,a,r){n.unbind("mouseover").mouseover(function(i){for(var o,s,l=i.target,c=l;l!=this;)c=l,l=l.parentNode;(o=c._fci)!==e&&(c._fci=e,s=a.events[o],r(s,n.children().eq(0),a),t(i.target).trigger(i)),i.stopPropagation()})}}r.applyAll=at,o.month=function(t,e){var n=this;n.render=function(t,e){e&&(y(t,e),t.setDate(1));var o=M(t,!0);o.setDate(1);var s=y(M(o),1),l=M(o),c=M(s),d=a("firstDay"),f=a("weekends")?0:1;f&&(S(l),S(c,-1,!0));w(l,-(l.getDay()-Math.max(d,f)+7)%7),w(c,(7-c.getDay()+Math.max(d,f))%7);var u=Math.round((c-l)/(7*v));"fixed"==a("weekMode")&&(w(c,7*(6-u)),u=6);n.title=i(o,a("titleFormat")),n.start=o,n.end=s,n.visStart=l,n.visEnd=c,r(6,u,f?5:7,!0)},it.call(n,t,e,"month");var a=n.opt,r=n.renderBasic,i=e.formatDate},o.multiWeek=function(t,e){var n=this;n.render=function(t,e){e&&w(t,e*a("multiWeekSize")*7);var o=M(new Date,!0),s=w(M(t),-(t.getDay()-a("firstDay")+7)%7),l=w(M(o),-(o.getDay()-a("firstDay")+7)%7);a("multiWeekSize")>0&&w(t,- -Math.abs(Math.ceil(T(s,l)/7))%a("multiWeekSize")%a("multiWeekSize")*7);var c=M(t),d=w(M(t),-(t.getDay()-a("firstDay")+7)%7),f=w(M(d),7*a("multiWeekSize")),u=M(f),h=a("firstDay"),v=a("weekends")?0:1;v&&(S(d),S(u,-1,!0));w(d,-(d.getDay()-Math.max(h,v)+7)%7),w(u,(7-u.getDay()+Math.max(h,v))%7),n.title=i(d,w(M(u),-1),a("titleFormat")),n.start=c,n.end=f,n.visStart=d,n.visEnd=u,r(a("multiWeekSize"),a("multiWeekSize"),v?5:7,!0)},it.call(n,t,e,"multiWeek");var a=n.opt,r=n.renderBasic,i=e.formatDates},o.basicWeek=function(t,e){var n=this;n.render=function(t,e){e&&w(t,7*e);var o=w(M(t),-(t.getDay()-a("firstDay")+7)%7),s=w(M(o),7),l=M(o),c=M(s),d=a("weekends");d||(S(l),S(c,-1,!0));n.title=i(l,w(M(c),-1),a("titleFormat")),n.start=o,n.end=s,n.visStart=l,n.visEnd=c,r(1,1,d?7:5,!1)},it.call(n,t,e,"basicWeek");var a=n.opt,r=n.renderBasic,i=e.formatDates},o.basicDay=function(t,e){var n=this;n.render=function(t,e){e&&(w(t,e),a("weekends")||S(t,e<0?-1:1));n.title=i(t,a("titleFormat")),n.start=n.visStart=M(t,!0),n.end=n.visEnd=w(M(n.start),1),r(1,1,1,!1)},it.call(n,t,e,"basicDay");var a=n.opt,r=n.renderBasic,i=e.formatDate},s({weekMode:"fixed"}),o.agendaWeek=function(t,e){var n=this;n.render=function(t,e){e&&w(t,7*e);var o=w(M(t),-(t.getDay()-a("firstDay")+7)%7),s=w(M(o),7),l=M(o),c=M(s),d=a("weekends");d||(S(l),S(c,-1,!0));n.title=i(l,w(M(c),-1),a("titleFormat")),n.start=o,n.end=s,n.visStart=l,n.visEnd=c,r(d?7:5)},ot.call(n,t,e,"agendaWeek");var a=n.opt,r=n.renderAgenda,i=e.formatDates},o.agendaDay=function(t,e){var n=this;n.render=function(t,e){e&&(w(t,e),a("weekends")||S(t,e<0?-1:1));var o=M(t,!0),s=w(M(o),1);n.title=i(t,a("titleFormat")),n.start=n.visStart=o,n.end=n.visEnd=s,r(1),n.addedView&&n.addedView.render(t)},n.addedView=null,ot.call(n,t,e,"agendaDay");var a=n.opt,r=n.renderAgenda,i=e.formatDate},s({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ – h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24}),o.list=function(e,n){var a=this;a.render=function(n,l){l&&w(n,i("listPage")*l);a.start=a.visStart=M(n,!0),a.end=w(M(a.start),i("listPage")),a.visEnd=w(M(a.start),i("listRange")),b(a.visEnd,-1),a.title=s(n,a.visEnd,i("titleFormat")),i("firstDay"),i("weekends")?0:1,i("theme")?"ui":"fc",i("columnFormat","day"),r?o():r=t("<div>").addClass("fc-list-content").appendTo(e)},a.select=l,a.unselect=l,a.getDaySegmentContainer=function(){return r},lt.call(a,e,n,"list"),Ct.call(a);var r,i=a.opt,o=(a.trigger,a.clearEvents),s=(a.reportEventClear,n.formatDates);n.formatDate;function l(){}a.setWidth=function(t){},a.setHeight=function(t,e){r.css("height",t-1+"px").css("overflow","auto")}},o.table=function(e,n){var a=this;a.render=function(w,D){h=w,D&&(y(w,D),w.setDate(1));a.start=M(w,!0),a.start.setDate(1),a.end=y(M(a.start),1),a.visStart=M(a.start),a.visEnd=M(a.end),b(a.visEnd,-1),a.title=m(a.visStart,a.visEnd,v("titleFormat")),o=v("firstDay"),v("weekends")?0:1,v("theme")?"ui":"fc",s=v("columnFormat"),i?(g(),v("showDatepicker")&&(f.html(h.getDate()),u.html(m(h,null,v("titleFormat","table"))),l.datepicker("option","firstDay",o),l.datepicker("setDate",h))):function(a){for(var o=v("tableCols"),s="<table class='fc-border-separate' style='width:100%' cellspacing='0'><colgroup>",g=0;g<o.length;g++)s+="<col class='fc-event-"+o[g]+"' />";s+="</colgroup></table>",v("showDatepicker")&&(c=t("<div>").addClass("fc-table-dateinfo").appendTo(e),d=t("<div>").addClass("fc-table-dateinfo-number").appendTo(c),(f=t("<div>").appendTo(d)).html(a.getDate()),(u=t("<div>").addClass("fc-table-dateinfo-text").appendTo(c)).html(m(h,null,v("titleFormat","table"))),(l=t("<div>").addClass("fc-table-datepicker").appendTo(e)).datepicker({firstDay:v("firstDay"),weekendDays:v("weekendDays"),defaultDate:a,showWeek:!0,weekHeader:"",onSelect:function(t,e){var a=new Date(t);n.gotoDate(a),p("datepickerClick",this,a)}}));r=t("<div>").addClass("fc-list-content").appendTo(e),i=t(s).appendTo(r)}(h)},a.select=H,a.unselect=H,a.getDaySegmentContainer=function(){return i},a.getOrigDate=function(){return h},a.updateGrid=function(){D(),E()},a.updateToday=D,a.setAxisFormat=k,a.setStartOfBusiness=S,a.setEndOfBusiness=T,a.setWeekendDays=E,a.setBindingMode=x,a.setSelectable=F,lt.call(a,e,n,"table"),Mt.call(a);var r,i,o,s,l,c,d,f,u,h,v=a.opt,p=a.trigger,g=a.clearEvents,m=(a.reportEventClear,n.formatDates),w=n.formatDate;function D(){var e=C(new Date),n=w(e,s);t(i).find(".fc-list-header").each(function(){t(this).removeClass("fc-today"),t(this).next().children().removeClass("fc-state-highlight"),n==t(this).find("td").html()&&(t(this).addClass("fc-today"),t(this).next().children().addClass("fc-state-highlight"))}),l.datepicker("refresh")}function k(){}function S(){}function T(){}function E(){var e=v("weekendDays");t(i).find(".fc-list-section").each(function(){var n=parseInt(this.className.match(/fc-day-(\d)/)[1],10);-1==e.indexOf(n)?t(this).children().removeClass("fc-weekend-day"):t(this).children().addClass("fc-weekend-day")}),v("showDatepicker")&&l.datepicker("option","weekendDays",e)}function x(){}function F(){}function H(){}a.setWidth=function(t){var n=Math.floor(e.parent().width()/2)-8;e.css({left:t,width:n})},a.setHeight=function(t,e){if(v("showDatepicker")){var n=l.height();u.css("padding-bottom",n-l.children().outerHeight()+3);var a=u.outerHeight();d.css({height:n-a,"font-size":145-a}),f.height(145-a)}r.css("height",t-r.position().top-2+"px").css("overflow","auto")}},o.todo=function(e,n){var a=this;a.render=function(C,k){k&&(y(C,k),C.setDate(1));c=C;var S=M(C,!0),T=w(M(S),1);if(a.title=b(C,p("titleFormat")),a.start=a.visStart=S,a.end=a.visEnd=T,l=p("firstDay"),p("weekends")?0:1,p("theme")?"ui":"fc",p("columnFormat"),i){if(m(),s.find(".fc-filter-table-footer").text(p("buttonText","filtersFooter").replace("%date%",D(C,null,p("columnFormat","todo")))),p("showDatepicker")){h.html(C.getDate()),v.html(D(C,null,p("titleFormat","todo")));var E=M(C,!0);E.setHours(12),E.setDate(1),E.setMonth(c.getMonth()-d.length+1),d.forEach(function(t,e){E.setMonth(E.getMonth()+1),t.datepicker("option","firstDay",l),0===e&&d.length<3||e===d.length-2&&d.length>2?t.datepicker("setDate",C):t.datepicker("setDate",E)})}}else!function(a){for(var l=p("todoCols"),c="<table class='fc-border-separate' style='width:100%' cellspacing='0'><colgroup>",m=0;m<l.length;m++)c+="<col class='fc-event-"+l[m]+"' />";c+="</colgroup></table>",p("showDatepicker")&&(f=t("<div>").addClass("fc-table-dateinfo").appendTo(e),u=t("<div>").addClass("fc-table-dateinfo-number").appendTo(f),(h=t("<div>").appendTo(u)).html(a.getDate()),(v=t("<div>").addClass("fc-table-dateinfo-text").appendTo(f)).html(D(a,null,p("titleFormat","todo"))),(d=[t("<div>").addClass("fc-table-datepicker fc-table-datepicker-current").appendTo(e)])[0].datepicker({firstDay:p("firstDay"),weekendDays:p("weekendDays"),defaultDate:a,showWeek:!0,weekHeader:"",onSelect:function(t,e){var a=new Date(t);n.gotoDate(a),g("datepickerClick",this,a)}}));o=t("<div>").addClass("fc-filter").appendTo(e);var y='<table class="fc-filter-table"><tr><td class="fc-filter-table-header" colspan="2">'+p("buttonText","filtersHeader")+"</td></tr>";p("simpleFilters")?y+='<tr><td class="fc-filter-option fc-filter-action" data-type="filterAction">'+p("buttonText","filterAction")+'</td><td class="fc-filter-option fc-filter-completed fc-filter-option-last" data-type="filterCompleted">'+p("buttonText","filterCompleted")+" *</td></tr>":y+='<tr><td class="fc-filter-option fc-filter-action" data-type="filterAction">'+p("buttonText","filterAction")+'</td><td class="fc-filter-option fc-filter-progress" data-type="filterProgress">'+p("buttonText","filterProgress")+'</td></tr><tr><td class="fc-filter-option fc-filter-completed" data-type="filterCompleted">'+p("buttonText","filterCompleted")+' *</td><td class="fc-filter-option fc-filter-canceled fc-filter-option-last" data-type="filterCanceled">'+p("buttonText","filterCanceled")+"</td></tr>";y+='<tr><td class="fc-filter-table-footer" colspan="2">'+p("buttonText","filtersFooter").replace("%date%",D(a,null,p("columnFormat","todo")))+"</td></tr></table>",s=t(y).appendTo(o),r=t("<div>").addClass("fc-list-content").appendTo(e),i=t(c).appendTo(r)}(C),s.find(".fc-filter-option").each(function(){-1!=p("defaultFilters").indexOf(t(this).attr("data-type"))&&H(t(this)),t(this).click(function(){H(t(this))})})},a.select=N,a.unselect=N,a.getDaySegmentContainer=function(){return i},a.applyFilters=z,a.allowSelectEvent=function(t){t?a.eventSelectLock++:a.eventSelectLock--},a.eventSelectLock=0,a.updateGrid=function(){C(),E()},a.updateToday=C,a.setAxisFormat=k,a.setStartOfBusiness=S,a.setEndOfBusiness=T,a.setWeekendDays=E,a.setBindingMode=x,a.setSelectable=F,lt.call(a,e,n,"todo"),kt.call(a);var r,i,o,s,l,c,d,f,u,h,v,p=a.opt,g=a.trigger,m=a.clearEvents,D=(a.reportEventClear,n.formatDates),b=n.formatDate;function C(){p("showDatepicker")&&d.forEach(function(t){t.datepicker("refresh")})}function k(){}function S(){}function T(){}function E(){p("showDatepicker")&&d.forEach(function(t){t.datepicker("option","weekendDays",p("weekendDays"))})}function x(){}function F(){}function H(t){t.hasClass("fc-filter-option-selected")?t.removeClass("fc-filter-option-selected"):t.addClass("fc-filter-option-selected"),z()}function z(){s.find(".fc-filter-option").each(function(){t(this).hasClass("fc-filter-option-selected")?a.getDaySegmentContainer().find(".fc-event-"+t(this).attr("data-type")).removeClass("fc-filter-hide"):a.getDaySegmentContainer().find(".fc-event-"+t(this).attr("data-type")).addClass("fc-filter-hide")}),p("todoOptionalCols").forEach(function(e){var n=t(".fc-event-"+e.col+":visible").filter(function(){return""!==this.innerHTML});t("col.fc-event-"+e.col).toggleClass("fc-hidden-empty",!n.length)}),a.selectEvent()}function N(){}a.setWidth=function(a){e.width(a);var r=Math.floor((a-f.outerWidth()-1)/d[0].outerWidth());if(r>d.length){var i=M(c,!0);i.setHours(12),i.setDate(1),i.setMonth(c.getMonth()+1),1==d.length&&d.push(t("<div>").addClass("fc-table-datepicker fc-table-datepicker-no-default").prependTo(e).datepicker({firstDay:p("firstDay"),weekendDays:p("weekendDays"),defaultDate:M(i),showWeek:!0,weekHeader:"",hideIfNoPrevNext:!0,onSelect:function(t,e){var a=new Date(t);n.gotoDate(a),g("datepickerClick",this,a)}})),i.setMonth(i.getMonth()-d.length+1);for(var s=d.length;s<r;s++)i.setMonth(i.getMonth()-1),d.unshift(t("<div>").addClass("fc-table-datepicker fc-table-datepicker-no-default").insertBefore(o).datepicker({firstDay:p("firstDay"),weekendDays:p("weekendDays"),defaultDate:M(i),showWeek:!0,weekHeader:"",hideIfNoPrevNext:!0,onSelect:function(t,e){var a=new Date(t);n.gotoDate(a),g("datepickerClick",this,a)}}))}else for(;d.length>r&&d.length>1;)2==d.length?d.pop().remove():d.shift().remove();var l=0;p("todoOptionalCols").forEach(function(e){l+=t("col.fc-event-"+e.col).hasClass("fc-hidden-empty")?e.width:0}),p("todoColThresholds").forEach(function(e){t("col.fc-event-"+e.col).toggleClass("fc-hidden-width",a<e.width-l)})},a.setHeight=function(t,e){if(p("showDatepicker")){var n=d[0].height();v.css("padding-bottom",n-d[0].children().outerHeight()+3);var a=v.outerHeight();u.css({height:n-a,"font-size":145-a}),h.height(145-a)}r.css({height:t-r.position().top-2,overflow:"auto"})}}}(jQuery);